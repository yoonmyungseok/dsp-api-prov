2023-12-14 13:20:39.398  INFO 5053 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5053 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 13:20:39.421  INFO 5053 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 13:20:40.671  INFO 5053 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 13:20:40.679  INFO 5053 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 13:20:40.680  INFO 5053 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 13:20:40.731  INFO 5053 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 13:20:40.731  INFO 5053 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1254 ms
2023-12-14 13:20:41.646  INFO 5053 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 13:20:41.695  INFO 5053 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 13:20:41.696  INFO 5053 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 13:20:41.971  INFO 5053 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 13:20:41.993  INFO 5053 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3406ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 13:20:42.028  INFO 5053 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 13:20:42.051  INFO 5053 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@64693226{/,null,AVAILABLE}
2023-12-14 13:20:42.059  INFO 5053 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@46d567cb{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 13:20:42.059  INFO 5053 --- [main] org.eclipse.jetty.server.Server          : Started @3472ms
2023-12-14 13:20:42.064  INFO 5053 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 13:20:42.064  INFO 5053 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 13:20:42.064  INFO 5053 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 310ms (build:40ms init:177ms start:93ms)
2023-12-14 13:20:42.068  INFO 5053 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.111 seconds (JVM running for 3.481)
2023-12-14 13:21:02.821  INFO 5053 --- [qtp1201614274-38] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@7dd8e2d7, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=62, fileExtension=sh, fileName=I0000001-S00001-1-deploy-ls-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 13:21:02.837  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 13:21:02.837  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh
echo "Test..."

cd /home/dsp_if

ls -al

echo "Done"
2023-12-14 13:21:02.842  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Test...
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 합계 77880
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : drwxr-xr-x. 6 root root       79 12월 13 17:59 .
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : drwxr-xr-x. 4 root root       38 11월 21 09:16 ..
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : -rw-r--r--. 1 root root 79746505 12월 13 17:59 agent-1.0.0.jar
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : drwxr-xr-x. 2 root root       55 12월  8 17:14 file
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : drwxr-xr-x. 2 root root      140 12월 13 16:44 logs
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : drwxr-xr-x. 3 root root      133 12월 13 16:50 script
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : drwxr-xr-x. 4 root root       40 12월 13 17:26 yaml
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Done
2023-12-14 13:21:02.856  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 13:21:02.884  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 13:21:02.885  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 13:21:02.885  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 13:21:07.920  INFO 5053 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
Test...
합계 77880
drwxr-xr-x. 6 root root       79 12월 13 17:59 .
drwxr-xr-x. 4 root root       38 11월 21 09:16 ..
-rw-r--r--. 1 root root 79746505 12월 13 17:59 agent-1.0.0.jar
drwxr-xr-x. 2 root root       55 12월  8 17:14 file
drwxr-xr-x. 2 root root      140 12월 13 16:44 logs
drwxr-xr-x. 3 root root      133 12월 13 16:50 script
drwxr-xr-x. 4 root root       40 12월 13 17:26 yaml
Done

2023-12-14 13:21:21.006  INFO 5053 --- [qtp1201614274-34] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@7dd8e2d7, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 13:21:21.009  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 13:21:21.009  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 13:21:21.013  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 13:21:21.027  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 13:21:21.027  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 13:21:21.027  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 13:21:21.027  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 13:21:31.031  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 13:21:31.865  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 13:21:31.930  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:31.926  INFO 5113 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5113 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 13:21:31.941  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:31.937  INFO 5113 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 13:21:33.189  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:33.183  INFO 5113 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 13:21:33.201  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:33.191  INFO 5113 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 13:21:33.201  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:33.192  INFO 5113 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 13:21:33.266  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:33.263  INFO 5113 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 13:21:33.266  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:33.263  INFO 5113 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1282 ms
2023-12-14 13:21:34.293  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.292  INFO 5113 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 13:21:34.350  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.340  INFO 5113 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 13:21:34.350  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.341  INFO 5113 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 13:21:34.607  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.597  INFO 5113 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 13:21:34.625  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.625  INFO 5113 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3586ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 13:21:34.667  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.665  INFO 5113 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 13:21:34.706  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.706  INFO 5113 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@240f6c41{/,null,AVAILABLE}
2023-12-14 13:21:34.715  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.712  INFO 5113 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@162b3d47{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 13:21:34.715  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.713  INFO 5113 --- [           main] org.eclipse.jetty.server.Server          : Started @3674ms
2023-12-14 13:21:34.729  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.720  INFO 5113 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 13:21:34.729  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.720  INFO 5113 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 13:21:34.729  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.720  INFO 5113 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 312ms (build:40ms init:150ms start:122ms)
2023-12-14 13:21:34.729  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:21:34.724  INFO 5113 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.287 seconds (JVM running for 3.686)
2023-12-14 13:21:41.036  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 13:21:41.039  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 13:21:41.041  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 13:21:41.041  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 13:21:41.041  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 13:21:46.052  INFO 5053 --- [Camel (camel-1) thread #2 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 13:21:31.926  INFO 5113 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5113 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 13:21:31.937  INFO 5113 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 13:21:33.183  INFO 5113 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 13:21:33.191  INFO 5113 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 13:21:33.192  INFO 5113 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 13:21:33.263  INFO 5113 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 13:21:33.263  INFO 5113 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1282 ms
2023-12-14 13:21:34.292  INFO 5113 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 13:21:34.340  INFO 5113 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 13:21:34.341  INFO 5113 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 13:21:34.597  INFO 5113 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 13:21:34.625  INFO 5113 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3586ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 13:21:34.665  INFO 5113 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 13:21:34.706  INFO 5113 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@240f6c41{/,null,AVAILABLE}
2023-12-14 13:21:34.712  INFO 5113 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@162b3d47{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 13:21:34.713  INFO 5113 --- [           main] org.eclipse.jetty.server.Server          : Started @3674ms
2023-12-14 13:21:34.720  INFO 5113 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 13:21:34.720  INFO 5113 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 13:21:34.720  INFO 5113 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 312ms (build:40ms init:150ms start:122ms)
2023-12-14 13:21:34.724  INFO 5113 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.287 seconds (JVM running for 3.686)
Execution successful.

2023-12-14 13:32:13.150  INFO 5053 --- [qtp1201614274-41] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@53e11afc, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=220, fileExtension=sh, fileName=I0000001-S00001-1-deploy-stop-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 13:32:13.153  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 13:32:13.153  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

kill -9 $CURRENT_PID
echo "kill: {$CURRENT_PID}"
sleep 10

echo "Done"

2023-12-14 13:32:13.158  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 13:32:13.174  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {5113}
2023-12-14 13:32:13.174  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : kill: {5113}
2023-12-14 13:32:23.181  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Done
2023-12-14 13:32:23.184  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 13:32:23.187  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 13:32:23.187  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 13:32:23.187  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 13:32:28.196  INFO 5053 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {5113}
kill: {5113}
Done

2023-12-14 13:41:33.110  INFO 5053 --- [qtp1201614274-34] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@68f258e8, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 13:41:33.112  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 13:41:33.112  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 13:41:33.115  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 13:41:33.126  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 13:41:33.126  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 13:41:33.126  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 13:41:33.126  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 13:41:43.128  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 13:41:44.001  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 13:41:44.048  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:44.044  INFO 5190 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5190 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 13:41:44.048  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:44.046  INFO 5190 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 13:41:45.443  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:45.438  INFO 5190 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 13:41:45.449  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:45.446  INFO 5190 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 13:41:45.449  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:45.446  INFO 5190 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 13:41:45.499  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:45.497  INFO 5190 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 13:41:45.499  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:45.497  INFO 5190 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1378 ms
2023-12-14 13:41:46.443  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.437  INFO 5190 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 13:41:46.506  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.495  INFO 5190 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 13:41:46.506  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.497  INFO 5190 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 13:41:46.785  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.783  INFO 5190 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 13:41:46.811  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.808  INFO 5190 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3672ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 13:41:46.852  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.848  INFO 5190 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 13:41:46.876  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.872  INFO 5190 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 13:41:46.887  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.879  INFO 5190 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 13:41:46.887  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.879  INFO 5190 --- [           main] org.eclipse.jetty.server.Server          : Started @3743ms
2023-12-14 13:41:46.887  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.886  INFO 5190 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 13:41:46.887  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.886  INFO 5190 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 13:41:46.887  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.886  INFO 5190 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 303ms (build:38ms init:163ms start:102ms)
2023-12-14 13:41:46.898  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 13:41:46.889  INFO 5190 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.321 seconds (JVM running for 3.753)
2023-12-14 13:41:53.133  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 13:41:53.137  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 13:41:53.140  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 13:41:53.140  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 13:41:53.140  INFO 5053 --- [qtp1201614274-34] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 13:41:58.145  INFO 5053 --- [Camel (camel-1) thread #4 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 13:41:44.044  INFO 5190 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5190 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 13:41:44.046  INFO 5190 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 13:41:45.438  INFO 5190 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 13:41:45.446  INFO 5190 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 13:41:45.446  INFO 5190 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 13:41:45.497  INFO 5190 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 13:41:45.497  INFO 5190 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1378 ms
2023-12-14 13:41:46.437  INFO 5190 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 13:41:46.495  INFO 5190 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 13:41:46.497  INFO 5190 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 13:41:46.783  INFO 5190 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 13:41:46.808  INFO 5190 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3672ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 13:41:46.848  INFO 5190 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 13:41:46.872  INFO 5190 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 13:41:46.879  INFO 5190 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 13:41:46.879  INFO 5190 --- [           main] org.eclipse.jetty.server.Server          : Started @3743ms
2023-12-14 13:41:46.886  INFO 5190 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 13:41:46.886  INFO 5190 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 13:41:46.886  INFO 5190 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 303ms (build:38ms init:163ms start:102ms)
2023-12-14 13:41:46.889  INFO 5190 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.321 seconds (JVM running for 3.753)
Execution successful.

2023-12-14 15:00:46.558  INFO 5053 --- [qtp1201614274-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@52d4b0b1, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:00:46.559  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:00:46.559  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:00:46.561  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:00:46.571  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 15:00:46.571  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 15:00:46.573  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 15:00:46.573  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 15:00:56.575  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:00:57.349  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:00:57.436  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:57.421  INFO 5298 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5298 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:00:57.436  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:57.426  INFO 5298 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:00:58.680  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:58.677  INFO 5298 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:00:58.691  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:58.686  INFO 5298 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:00:58.691  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:58.686  INFO 5298 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:00:58.739  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:58.735  INFO 5298 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:00:58.739  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:58.735  INFO 5298 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1270 ms
2023-12-14 15:00:59.728  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:59.718  INFO 5298 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:00:59.773  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:59.763  INFO 5298 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:00:59.773  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:00:59.764  INFO 5298 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:01:00.024  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.014  INFO 5298 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:01:00.050  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.037  INFO 5298 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3453ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:01:00.104  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.097  INFO 5298 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:01:00.145  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.139  INFO 5298 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:01:00.145  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.144  INFO 5298 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:01:00.145  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.145  INFO 5298 --- [           main] org.eclipse.jetty.server.Server          : Started @3561ms
2023-12-14 15:01:00.158  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.150  INFO 5298 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:01:00.158  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.150  INFO 5298 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:01:00.158  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.150  INFO 5298 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 308ms (build:38ms init:135ms start:135ms)
2023-12-14 15:01:00.158  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:00.154  INFO 5298 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.189 seconds (JVM running for 3.57)
2023-12-14 15:01:06.583  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:01:18.861  INFO 5053 --- [qtp1201614274-37] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@136bc5eb, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:01:18.863  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:01:18.863  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:01:18.866  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:01:18.886  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {5298}
2023-12-14 15:01:18.886  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5298: command not found
2023-12-14 15:01:18.888  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : kill: {5298}
2023-12-14 15:01:18.896  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:01:18.897  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:01:18.897  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:01:18.897  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:01:23.905  INFO 5053 --- [Camel (camel-1) thread #3 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:00:57.421  INFO 5298 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5298 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:00:57.426  INFO 5298 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:00:58.677  INFO 5298 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:00:58.686  INFO 5298 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:00:58.686  INFO 5298 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:00:58.735  INFO 5298 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:00:58.735  INFO 5298 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1270 ms
2023-12-14 15:00:59.718  INFO 5298 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:00:59.763  INFO 5298 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:00:59.764  INFO 5298 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:01:00.014  INFO 5298 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:01:00.037  INFO 5298 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3453ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:01:00.097  INFO 5298 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:01:00.139  INFO 5298 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:01:00.144  INFO 5298 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:01:00.145  INFO 5298 --- [           main] org.eclipse.jetty.server.Server          : Started @3561ms
2023-12-14 15:01:00.150  INFO 5298 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:01:00.150  INFO 5298 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:01:00.150  INFO 5298 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 308ms (build:38ms init:135ms start:135ms)
2023-12-14 15:01:00.154  INFO 5298 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.189 seconds (JVM running for 3.57)
Execution successful.

2023-12-14 15:01:28.891  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:01:29.628  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:01:29.628  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:01:29.628  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:01:29.628  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:01:29.628  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:01:29.629  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:01:29.629  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:01:29.629  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:01:29.629  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:01:29.686  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:29.682  INFO 5365 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5365 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:01:29.687  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:29.684  INFO 5365 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:01:30.992  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:30.989  INFO 5365 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:01:31.006  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:30.999  INFO 5365 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:01:31.006  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:30.999  INFO 5365 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:01:31.052  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:31.044  INFO 5365 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:01:31.052  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:31.044  INFO 5365 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1264 ms
2023-12-14 15:01:32.040  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.040  INFO 5365 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:01:32.104  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.096  INFO 5365 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:01:32.104  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.098  INFO 5365 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:01:32.372  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.368  INFO 5365 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:01:32.414  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.404  INFO 5365 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3504ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:01:32.446  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.443  INFO 5365 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:01:32.464  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.464  INFO 5365 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:01:32.470  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.469  INFO 5365 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:01:32.470  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.470  INFO 5365 --- [           main] org.eclipse.jetty.server.Server          : Started @3569ms
2023-12-14 15:01:32.477  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.475  INFO 5365 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:01:32.477  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.475  INFO 5365 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:01:32.477  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.475  INFO 5365 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 283ms (build:38ms init:138ms start:107ms)
2023-12-14 15:01:32.489  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:01:32.489  INFO 5365 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.24 seconds (JVM running for 3.588)
2023-12-14 15:01:38.899  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:01:38.902  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:01:38.908  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:01:38.908  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:01:38.908  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:01:43.916  INFO 5053 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {5298}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5298: command not found
kill: {5298}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:01:29.682  INFO 5365 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5365 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:01:29.684  INFO 5365 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:01:30.989  INFO 5365 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:01:30.999  INFO 5365 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:01:30.999  INFO 5365 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:01:31.044  INFO 5365 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:01:31.044  INFO 5365 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1264 ms
2023-12-14 15:01:32.040  INFO 5365 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:01:32.096  INFO 5365 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:01:32.098  INFO 5365 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:01:32.368  INFO 5365 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:01:32.404  INFO 5365 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3504ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:01:32.443  INFO 5365 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:01:32.464  INFO 5365 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:01:32.469  INFO 5365 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:01:32.470  INFO 5365 --- [           main] org.eclipse.jetty.server.Server          : Started @3569ms
2023-12-14 15:01:32.475  INFO 5365 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:01:32.475  INFO 5365 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:01:32.475  INFO 5365 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 283ms (build:38ms init:138ms start:107ms)
2023-12-14 15:01:32.489  INFO 5365 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.24 seconds (JVM running for 3.588)
Execution successful.

2023-12-14 15:07:15.187  INFO 5053 --- [qtp1201614274-38] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@4b3b6016, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:07:15.188  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:07:15.189  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:07:15.191  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:07:15.203  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 15:07:15.203  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 15:07:15.203  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 15:07:15.203  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 15:07:25.206  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:07:26.083  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:07:26.183  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:26.176  INFO 5424 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5424 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:07:26.183  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:26.177  INFO 5424 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:07:27.366  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:27.364  INFO 5424 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:07:27.380  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:27.374  INFO 5424 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:07:27.380  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:27.374  INFO 5424 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:07:27.423  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:27.422  INFO 5424 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:07:27.423  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:27.422  INFO 5424 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1157 ms
2023-12-14 15:07:28.367  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.354  INFO 5424 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:07:28.413  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.401  INFO 5424 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:07:28.413  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.402  INFO 5424 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:07:28.660  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.658  INFO 5424 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:07:28.689  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.684  INFO 5424 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3469ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:07:28.726  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.722  INFO 5424 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:07:28.762  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.761  INFO 5424 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:07:28.773  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.769  INFO 5424 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:07:28.773  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.769  INFO 5424 --- [           main] org.eclipse.jetty.server.Server          : Started @3554ms
2023-12-14 15:07:28.784  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.775  INFO 5424 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:07:28.784  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.776  INFO 5424 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:07:28.784  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.776  INFO 5424 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 302ms (build:40ms init:145ms start:117ms)
2023-12-14 15:07:28.784  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:07:28.779  INFO 5424 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.134 seconds (JVM running for 3.564)
2023-12-14 15:07:35.214  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:07:35.220  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:07:35.223  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:07:35.224  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:07:35.224  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:07:40.231  INFO 5053 --- [Camel (camel-1) thread #2 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:07:26.176  INFO 5424 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5424 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:07:26.177  INFO 5424 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:07:27.364  INFO 5424 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:07:27.374  INFO 5424 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:07:27.374  INFO 5424 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:07:27.422  INFO 5424 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:07:27.422  INFO 5424 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1157 ms
2023-12-14 15:07:28.354  INFO 5424 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:07:28.401  INFO 5424 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:07:28.402  INFO 5424 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:07:28.658  INFO 5424 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:07:28.684  INFO 5424 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3469ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:07:28.722  INFO 5424 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:07:28.761  INFO 5424 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:07:28.769  INFO 5424 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:07:28.769  INFO 5424 --- [           main] org.eclipse.jetty.server.Server          : Started @3554ms
2023-12-14 15:07:28.775  INFO 5424 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:07:28.776  INFO 5424 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:07:28.776  INFO 5424 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 302ms (build:40ms init:145ms start:117ms)
2023-12-14 15:07:28.779  INFO 5424 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.134 seconds (JVM running for 3.564)
Execution successful.

2023-12-14 15:17:48.489  INFO 5053 --- [qtp1201614274-38] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@623e7359, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:17:48.490  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:17:48.490  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:17:48.492  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:17:48.498  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 15:17:48.499  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 15:17:48.499  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 15:17:48.499  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 15:17:58.501  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:17:59.289  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:17:59.290  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:17:59.290  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:17:59.290  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:17:59.290  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:17:59.290  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:17:59.290  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:17:59.290  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:17:59.290  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:17:59.392  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:17:59.381  INFO 5484 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5484 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:17:59.392  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:17:59.383  INFO 5484 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:18:00.663  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:00.657  INFO 5484 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:18:00.674  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:00.666  INFO 5484 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:18:00.674  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:00.666  INFO 5484 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:18:00.722  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:00.716  INFO 5484 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:18:00.722  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:00.716  INFO 5484 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1266 ms
2023-12-14 15:18:01.673  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:01.667  INFO 5484 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:18:01.722  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:01.713  INFO 5484 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:18:01.722  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:01.714  INFO 5484 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:18:02.039  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.038  INFO 5484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:18:02.064  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.062  INFO 5484 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3553ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:18:02.101  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.100  INFO 5484 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:18:02.137  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.135  INFO 5484 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:18:02.144  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.141  INFO 5484 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:18:02.144  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.141  INFO 5484 --- [           main] org.eclipse.jetty.server.Server          : Started @3632ms
2023-12-14 15:18:02.153  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.147  INFO 5484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:18:02.153  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.147  INFO 5484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:18:02.153  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.147  INFO 5484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 371ms (build:38ms init:225ms start:108ms)
2023-12-14 15:18:02.153  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:18:02.150  INFO 5484 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.282 seconds (JVM running for 3.641)
2023-12-14 15:18:08.510  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:18:08.514  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:18:08.517  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:18:08.517  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:18:08.517  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:18:13.523  INFO 5053 --- [Camel (camel-1) thread #8 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:17:59.381  INFO 5484 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5484 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:17:59.383  INFO 5484 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:18:00.657  INFO 5484 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:18:00.666  INFO 5484 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:18:00.666  INFO 5484 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:18:00.716  INFO 5484 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:18:00.716  INFO 5484 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1266 ms
2023-12-14 15:18:01.667  INFO 5484 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:18:01.713  INFO 5484 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:18:01.714  INFO 5484 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:18:02.038  INFO 5484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:18:02.062  INFO 5484 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3553ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:18:02.100  INFO 5484 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:18:02.135  INFO 5484 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:18:02.141  INFO 5484 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:18:02.141  INFO 5484 --- [           main] org.eclipse.jetty.server.Server          : Started @3632ms
2023-12-14 15:18:02.147  INFO 5484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:18:02.147  INFO 5484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:18:02.147  INFO 5484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 371ms (build:38ms init:225ms start:108ms)
2023-12-14 15:18:02.150  INFO 5484 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.282 seconds (JVM running for 3.641)
Execution successful.

2023-12-14 15:27:45.627  INFO 5053 --- [qtp1201614274-38] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@6e37ad91, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:27:45.629  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:27:45.630  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:27:45.633  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:27:45.644  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 15:27:45.644  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 15:27:45.645  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 15:27:45.645  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 15:27:55.647  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:27:56.348  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:27:56.439  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:56.433  INFO 5545 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5545 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:27:56.439  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:56.434  INFO 5545 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:27:57.710  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:57.707  INFO 5545 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:27:57.723  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:57.714  INFO 5545 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:27:57.723  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:57.714  INFO 5545 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:27:57.767  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:57.755  INFO 5545 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:27:57.767  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:57.755  INFO 5545 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1268 ms
2023-12-14 15:27:58.658  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:58.656  INFO 5545 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:27:58.713  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:58.702  INFO 5545 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:27:58.713  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:58.703  INFO 5545 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:27:58.962  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:58.954  INFO 5545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:27:58.984  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:58.978  INFO 5545 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3322ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:27:59.027  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:59.019  INFO 5545 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:27:59.061  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:59.059  INFO 5545 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:27:59.068  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:59.066  INFO 5545 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:27:59.069  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:59.067  INFO 5545 --- [           main] org.eclipse.jetty.server.Server          : Started @3410ms
2023-12-14 15:27:59.081  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:59.073  INFO 5545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:27:59.081  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:59.073  INFO 5545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:27:59.081  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:59.073  INFO 5545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 306ms (build:39ms init:148ms start:119ms)
2023-12-14 15:27:59.081  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:27:59.077  INFO 5545 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.076 seconds (JVM running for 3.421)
2023-12-14 15:28:05.655  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:28:18.079  INFO 5053 --- [qtp1201614274-41] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@25219f20, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:28:18.080  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:28:18.081  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:28:18.083  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:28:18.094  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {5545}
2023-12-14 15:28:18.096  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5545: command not found
2023-12-14 15:28:18.097  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : kill: {5545}
2023-12-14 15:28:18.103  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:28:18.105  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:28:18.105  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:28:18.105  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:28:23.112  INFO 5053 --- [Camel (camel-1) thread #5 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:27:56.433  INFO 5545 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5545 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:27:56.434  INFO 5545 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:27:57.707  INFO 5545 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:27:57.714  INFO 5545 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:27:57.714  INFO 5545 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:27:57.755  INFO 5545 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:27:57.755  INFO 5545 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1268 ms
2023-12-14 15:27:58.656  INFO 5545 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:27:58.702  INFO 5545 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:27:58.703  INFO 5545 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:27:58.954  INFO 5545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:27:58.978  INFO 5545 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3322ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:27:59.019  INFO 5545 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:27:59.059  INFO 5545 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:27:59.066  INFO 5545 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:27:59.067  INFO 5545 --- [           main] org.eclipse.jetty.server.Server          : Started @3410ms
2023-12-14 15:27:59.073  INFO 5545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:27:59.073  INFO 5545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:27:59.073  INFO 5545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 306ms (build:39ms init:148ms start:119ms)
2023-12-14 15:27:59.077  INFO 5545 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.076 seconds (JVM running for 3.421)
Execution successful.

2023-12-14 15:28:28.098  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:28:28.883  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:28:28.884  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:28:28.884  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:28:28.884  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:28:28.884  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:28:28.884  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:28:28.884  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:28:28.884  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:28:28.884  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:28:28.949  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:28.946  INFO 5601 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5601 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:28:28.949  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:28.949  INFO 5601 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:28:30.141  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:30.132  INFO 5601 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:28:30.141  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:30.140  INFO 5601 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:28:30.141  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:30.140  INFO 5601 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:28:30.194  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:30.185  INFO 5601 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:28:30.194  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:30.185  INFO 5601 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1149 ms
2023-12-14 15:28:31.139  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.130  INFO 5601 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:28:31.285  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.275  INFO 5601 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:28:31.285  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.276  INFO 5601 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:28:31.525  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.518  INFO 5601 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:28:31.566  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.555  INFO 5601 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3450ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:28:31.598  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.591  INFO 5601 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:28:31.623  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.617  INFO 5601 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:28:31.624  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.623  INFO 5601 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:28:31.624  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.623  INFO 5601 --- [           main] org.eclipse.jetty.server.Server          : Started @3518ms
2023-12-14 15:28:31.640  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.631  INFO 5601 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:28:31.640  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.631  INFO 5601 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:28:31.640  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.631  INFO 5601 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 285ms (build:39ms init:133ms start:113ms)
2023-12-14 15:28:31.640  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:28:31.634  INFO 5601 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.173 seconds (JVM running for 3.529)
2023-12-14 15:28:38.103  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:28:50.474  INFO 5053 --- [qtp1201614274-39] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@4ca6a822, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:28:50.476  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:28:50.476  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:28:50.478  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:28:50.499  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {5601}
2023-12-14 15:28:50.499  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5601: command not found
2023-12-14 15:28:50.501  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : kill: {5601}
2023-12-14 15:28:50.507  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:28:50.509  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:28:50.509  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:28:50.509  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:28:55.516  INFO 5053 --- [Camel (camel-1) thread #3 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {5545}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5545: command not found
kill: {5545}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:28:28.946  INFO 5601 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5601 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:28:28.949  INFO 5601 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:28:30.132  INFO 5601 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:28:30.140  INFO 5601 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:28:30.140  INFO 5601 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:28:30.185  INFO 5601 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:28:30.185  INFO 5601 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1149 ms
2023-12-14 15:28:31.130  INFO 5601 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:28:31.275  INFO 5601 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:28:31.276  INFO 5601 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:28:31.518  INFO 5601 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:28:31.555  INFO 5601 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3450ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:28:31.591  INFO 5601 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:28:31.617  INFO 5601 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:28:31.623  INFO 5601 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:28:31.623  INFO 5601 --- [           main] org.eclipse.jetty.server.Server          : Started @3518ms
2023-12-14 15:28:31.631  INFO 5601 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:28:31.631  INFO 5601 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:28:31.631  INFO 5601 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 285ms (build:39ms init:133ms start:113ms)
2023-12-14 15:28:31.634  INFO 5601 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.173 seconds (JVM running for 3.529)
Execution successful.

2023-12-14 15:29:00.504  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:29:01.342  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:29:01.408  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:01.402  INFO 5656 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5656 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:29:01.408  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:01.404  INFO 5656 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:29:02.715  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:02.713  INFO 5656 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:29:02.732  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:02.732  INFO 5656 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:29:02.732  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:02.732  INFO 5656 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:29:02.784  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:02.783  INFO 5656 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:29:02.784  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:02.783  INFO 5656 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1340 ms
2023-12-14 15:29:03.691  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:03.688  INFO 5656 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:29:03.845  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:03.835  INFO 5656 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:29:03.845  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:03.838  INFO 5656 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:29:04.119  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.113  INFO 5656 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:29:04.146  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.137  INFO 5656 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3624ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:29:04.189  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.187  INFO 5656 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:29:04.210  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.206  INFO 5656 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:29:04.218  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.213  INFO 5656 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:29:04.218  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.213  INFO 5656 --- [           main] org.eclipse.jetty.server.Server          : Started @3701ms
2023-12-14 15:29:04.230  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.220  INFO 5656 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:29:04.230  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.221  INFO 5656 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:29:04.230  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.221  INFO 5656 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 288ms (build:39ms init:142ms start:107ms)
2023-12-14 15:29:04.230  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:29:04.224  INFO 5656 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.28 seconds (JVM running for 3.711)
2023-12-14 15:29:10.511  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:29:10.514  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:29:10.518  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:29:10.518  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:29:10.518  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:29:15.525  INFO 5053 --- [Camel (camel-1) thread #6 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {5601}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5601: command not found
kill: {5601}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:29:01.402  INFO 5656 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5656 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:29:01.404  INFO 5656 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:29:02.713  INFO 5656 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:29:02.732  INFO 5656 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:29:02.732  INFO 5656 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:29:02.783  INFO 5656 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:29:02.783  INFO 5656 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1340 ms
2023-12-14 15:29:03.688  INFO 5656 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:29:03.835  INFO 5656 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:29:03.838  INFO 5656 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:29:04.113  INFO 5656 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:29:04.137  INFO 5656 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3624ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:29:04.187  INFO 5656 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:29:04.206  INFO 5656 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:29:04.213  INFO 5656 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:29:04.213  INFO 5656 --- [           main] org.eclipse.jetty.server.Server          : Started @3701ms
2023-12-14 15:29:04.220  INFO 5656 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:29:04.221  INFO 5656 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:29:04.221  INFO 5656 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 288ms (build:39ms init:142ms start:107ms)
2023-12-14 15:29:04.224  INFO 5656 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.28 seconds (JVM running for 3.711)
Execution successful.

2023-12-14 15:32:46.227  INFO 5053 --- [qtp1201614274-40] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@2121a48f, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:32:46.229  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:32:46.229  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:32:46.231  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:32:46.244  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 15:32:46.244  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 15:32:46.244  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 15:32:46.244  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 15:32:56.247  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:32:57.024  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:32:57.112  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:32:57.104  INFO 5718 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5718 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:32:57.112  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:32:57.105  INFO 5718 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:32:57.785  INFO 5053 --- [qtp1201614274-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@1091bc67, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:32:57.786  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:32:57.786  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:32:57.801  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:32:57.803  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {5718}
2023-12-14 15:32:57.813  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5718: command not found
2023-12-14 15:32:57.814  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {5718}
2023-12-14 15:33:06.252  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 23:  5718 죽었음               nohup java -jar agent-1.0.0.jar --spring.profiles.active=if
2023-12-14 15:33:06.252  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:33:06.254  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:33:06.257  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:33:06.257  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:33:06.257  INFO 5053 --- [qtp1201614274-40] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:33:07.817  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:33:08.597  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:33:08.692  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:08.682  INFO 5748 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5748 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:33:08.692  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:08.683  INFO 5748 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:33:09.998  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:09.994  INFO 5748 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:33:10.009  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:10.001  INFO 5748 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:33:10.009  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:10.002  INFO 5748 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:33:10.044  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:10.044  INFO 5748 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:33:10.044  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:10.044  INFO 5748 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1294 ms
2023-12-14 15:33:10.933  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:10.933  INFO 5748 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:33:10.988  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:10.979  INFO 5748 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:33:10.988  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:10.981  INFO 5748 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:33:11.262  INFO 5053 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:32:57.104  INFO 5718 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5718 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:32:57.105  INFO 5718 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 23:  5718 죽었음               nohup java -jar agent-1.0.0.jar --spring.profiles.active=if
Execution successful.

2023-12-14 15:33:11.268 ERROR 5053 --- [qtp1201614274-39] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:277) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:381) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:825) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:223) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:555) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:1009) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:1086) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:285) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:269) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:896) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:206) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:161) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.copyStream(DefaultHttpBinding.java:500) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteDirectResponse(DefaultHttpBinding.java:566) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteResponse(DefaultHttpBinding.java:439) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.writeResponse(DefaultHttpBinding.java:362) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.component.jetty.CamelContinuationServlet.doService(CamelContinuationServlet.java:282) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar!/:3.1.0]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.component.jetty.CamelFilterWrapper.doFilter(CamelFilterWrapper.java:51) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.Server.handleAsync(Server.java:559) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$2(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:439) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 상대편이 연결을 끊음
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 43 common frames omitted

2023-12-14 15:33:11.284  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.274  INFO 5748 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:33:11.307  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.297  INFO 5748 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3471ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:33:11.338  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.335  INFO 5748 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:33:11.373  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.369  INFO 5748 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:33:11.381  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.376  INFO 5748 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:33:11.382  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.377  INFO 5748 --- [           main] org.eclipse.jetty.server.Server          : Started @3550ms
2023-12-14 15:33:11.394  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.385  INFO 5748 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:33:11.395  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.385  INFO 5748 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:33:11.395  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.385  INFO 5748 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 291ms (build:37ms init:144ms start:110ms)
2023-12-14 15:33:11.395  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:33:11.388  INFO 5748 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.202 seconds (JVM running for 3.562)
2023-12-14 15:33:17.824  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:35:22.404  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:35:22.406  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:35:22.407  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:35:22.407  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:35:27.414  INFO 5053 --- [Camel (camel-1) thread #7 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {5718}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5718: command not found
kill: {5718}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:33:08.682  INFO 5748 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5748 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:33:08.683  INFO 5748 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:33:09.994  INFO 5748 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:33:10.001  INFO 5748 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:33:10.002  INFO 5748 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:33:10.044  INFO 5748 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:33:10.044  INFO 5748 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1294 ms
2023-12-14 15:33:10.933  INFO 5748 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:33:10.979  INFO 5748 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:33:10.981  INFO 5748 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:33:11.274  INFO 5748 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:33:11.297  INFO 5748 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3471ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:33:11.335  INFO 5748 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:33:11.369  INFO 5748 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:33:11.376  INFO 5748 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:33:11.377  INFO 5748 --- [           main] org.eclipse.jetty.server.Server          : Started @3550ms
2023-12-14 15:33:11.385  INFO 5748 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:33:11.385  INFO 5748 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:33:11.385  INFO 5748 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 291ms (build:37ms init:144ms start:110ms)
2023-12-14 15:33:11.388  INFO 5748 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.202 seconds (JVM running for 3.562)
Execution successful.

2023-12-14 15:35:27.423 ERROR 5053 --- [qtp1201614274-38] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.completeWrite(WriteFlusher.java:378) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:119) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:300) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 11 common frames omitted

2023-12-14 15:35:31.618  INFO 5053 --- [qtp1201614274-41] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@68252d84, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:35:31.621  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:35:31.621  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:35:31.624  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:35:31.635  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 15:35:31.635  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 15:35:31.635  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 15:35:31.635  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 15:35:41.637  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:35:42.350  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:35:42.351  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:35:42.351  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:35:42.351  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:35:42.351  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:35:42.351  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:35:42.351  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:35:42.353  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:35:42.353  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:35:42.423  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:42.419  INFO 5805 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5805 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:35:42.423  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:42.421  INFO 5805 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:35:43.702  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:43.697  INFO 5805 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:35:43.713  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:43.706  INFO 5805 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:35:43.713  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:43.706  INFO 5805 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:35:43.756  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:43.753  INFO 5805 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:35:43.756  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:43.753  INFO 5805 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1270 ms
2023-12-14 15:35:44.727  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:44.719  INFO 5805 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:35:44.769  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:44.767  INFO 5805 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:35:44.769  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:44.768  INFO 5805 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:35:45.042  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.042  INFO 5805 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:35:45.079  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.070  INFO 5805 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3427ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:35:45.112  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.110  INFO 5805 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:35:45.143  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.139  INFO 5805 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:35:45.152  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.147  INFO 5805 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:35:45.152  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.148  INFO 5805 --- [           main] org.eclipse.jetty.server.Server          : Started @3505ms
2023-12-14 15:35:45.157  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.155  INFO 5805 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:35:45.157  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.155  INFO 5805 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:35:45.157  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.155  INFO 5805 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 333ms (build:51ms init:170ms start:112ms)
2023-12-14 15:35:45.169  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:35:45.159  INFO 5805 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.181 seconds (JVM running for 3.517)
2023-12-14 15:35:51.641  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:36:36.304  INFO 5053 --- [qtp1201614274-38] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@3a51bff4, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:36:36.306  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:36:36.306  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:36:36.309  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:36:36.319  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {5805}
2023-12-14 15:36:36.320  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5805: command not found
2023-12-14 15:36:36.320  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: {5805}
2023-12-14 15:36:36.326  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:36:36.328  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:36:36.328  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:36:36.328  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:36:41.334  INFO 5053 --- [Camel (camel-1) thread #2 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:35:42.419  INFO 5805 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5805 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:35:42.421  INFO 5805 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:35:43.697  INFO 5805 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:35:43.706  INFO 5805 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:35:43.706  INFO 5805 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:35:43.753  INFO 5805 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:35:43.753  INFO 5805 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1270 ms
2023-12-14 15:35:44.719  INFO 5805 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:35:44.767  INFO 5805 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:35:44.768  INFO 5805 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:35:45.042  INFO 5805 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:35:45.070  INFO 5805 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3427ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:35:45.110  INFO 5805 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:35:45.139  INFO 5805 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:35:45.147  INFO 5805 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:35:45.148  INFO 5805 --- [           main] org.eclipse.jetty.server.Server          : Started @3505ms
2023-12-14 15:35:45.155  INFO 5805 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:35:45.155  INFO 5805 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:35:45.155  INFO 5805 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 333ms (build:51ms init:170ms start:112ms)
2023-12-14 15:35:45.159  INFO 5805 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.181 seconds (JVM running for 3.517)
Execution successful.

2023-12-14 15:36:41.346 ERROR 5053 --- [qtp1201614274-37] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.completeWrite(WriteFlusher.java:378) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:119) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:300) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 11 common frames omitted

2023-12-14 15:36:46.323  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:36:47.099  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:36:47.163  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:47.156  INFO 5860 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5860 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:36:47.163  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:47.157  INFO 5860 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:36:48.322  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:48.315  INFO 5860 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:36:48.330  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:48.323  INFO 5860 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:36:48.330  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:48.323  INFO 5860 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:36:48.395  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:48.391  INFO 5860 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:36:48.395  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:48.391  INFO 5860 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1191 ms
2023-12-14 15:36:49.368  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.358  INFO 5860 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:36:49.434  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.433  INFO 5860 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:36:49.434  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.434  INFO 5860 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:36:49.705  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.703  INFO 5860 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:36:49.733  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.728  INFO 5860 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3396ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:36:49.767  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.765  INFO 5860 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:36:49.808  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.808  INFO 5860 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:36:49.819  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.816  INFO 5860 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:36:49.819  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.816  INFO 5860 --- [           main] org.eclipse.jetty.server.Server          : Started @3484ms
2023-12-14 15:36:49.830  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.822  INFO 5860 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:36:49.830  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.822  INFO 5860 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:36:49.830  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.823  INFO 5860 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 325ms (build:46ms init:161ms start:118ms)
2023-12-14 15:36:49.830  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:36:49.826  INFO 5860 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.11 seconds (JVM running for 3.494)
2023-12-14 15:36:56.330  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:46:04.268  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:46:04.270  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:46:04.270  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:46:04.270  INFO 5053 --- [qtp1201614274-38] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:46:09.277  INFO 5053 --- [Camel (camel-1) thread #4 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {5805}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5805: command not found
kill: {5805}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:36:47.156  INFO 5860 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5860 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:36:47.157  INFO 5860 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:36:48.315  INFO 5860 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:36:48.323  INFO 5860 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:36:48.323  INFO 5860 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:36:48.391  INFO 5860 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:36:48.391  INFO 5860 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1191 ms
2023-12-14 15:36:49.358  INFO 5860 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:36:49.433  INFO 5860 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:36:49.434  INFO 5860 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:36:49.703  INFO 5860 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:36:49.728  INFO 5860 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3396ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:36:49.765  INFO 5860 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:36:49.808  INFO 5860 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 15:36:49.816  INFO 5860 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:36:49.816  INFO 5860 --- [           main] org.eclipse.jetty.server.Server          : Started @3484ms
2023-12-14 15:36:49.822  INFO 5860 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:36:49.822  INFO 5860 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:36:49.823  INFO 5860 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 325ms (build:46ms init:161ms start:118ms)
2023-12-14 15:36:49.826  INFO 5860 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.11 seconds (JVM running for 3.494)
Execution successful.

2023-12-14 15:46:09.283 ERROR 5053 --- [qtp1201614274-34] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:277) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:381) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:825) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:223) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:555) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:1009) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:1086) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:285) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:269) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:896) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:206) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:161) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.copyStream(DefaultHttpBinding.java:500) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteDirectResponse(DefaultHttpBinding.java:566) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteResponse(DefaultHttpBinding.java:439) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.writeResponse(DefaultHttpBinding.java:362) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.component.jetty.CamelContinuationServlet.doService(CamelContinuationServlet.java:282) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar!/:3.1.0]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.component.jetty.CamelFilterWrapper.doFilter(CamelFilterWrapper.java:51) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.Server.handleAsync(Server.java:559) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$2(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:439) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 43 common frames omitted

2023-12-14 15:46:13.557  INFO 5053 --- [qtp1201614274-37] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@38308f54, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:46:13.558  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:46:13.558  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:46:13.560  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:46:13.566  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 15:46:13.566  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 15:46:13.566  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 15:46:13.566  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 15:46:23.569  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:46:24.376  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:46:24.377  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:46:24.377  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:46:24.377  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:46:24.377  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:46:24.377  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:46:24.377  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:46:24.377  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:46:24.377  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:46:24.427  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:24.425  INFO 5918 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5918 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:46:24.430  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:24.429  INFO 5918 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:46:25.717  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:25.712  INFO 5918 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:46:25.728  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:25.721  INFO 5918 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:46:25.728  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:25.721  INFO 5918 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:46:25.770  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:25.764  INFO 5918 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:46:25.770  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:25.764  INFO 5918 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1291 ms
2023-12-14 15:46:26.697  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:26.694  INFO 5918 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:46:26.772  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:26.762  INFO 5918 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:46:26.772  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:26.763  INFO 5918 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:46:27.030  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.030  INFO 5918 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:46:27.065  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.056  INFO 5918 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3476ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:46:27.097  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.095  INFO 5918 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:46:27.120  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.119  INFO 5918 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 15:46:27.131  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.127  INFO 5918 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:46:27.131  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.127  INFO 5918 --- [           main] org.eclipse.jetty.server.Server          : Started @3547ms
2023-12-14 15:46:27.133  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.132  INFO 5918 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:46:27.133  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.132  INFO 5918 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:46:27.133  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.132  INFO 5918 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 296ms (build:38ms init:156ms start:102ms)
2023-12-14 15:46:27.144  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:46:27.136  INFO 5918 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.178 seconds (JVM running for 3.557)
2023-12-14 15:46:33.577  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:46:33.580  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:46:33.583  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:46:33.583  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:46:33.583  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:46:38.590  INFO 5053 --- [Camel (camel-1) thread #8 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:46:24.425  INFO 5918 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5918 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:46:24.429  INFO 5918 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:46:25.712  INFO 5918 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:46:25.721  INFO 5918 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:46:25.721  INFO 5918 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:46:25.764  INFO 5918 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:46:25.764  INFO 5918 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1291 ms
2023-12-14 15:46:26.694  INFO 5918 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:46:26.762  INFO 5918 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:46:26.763  INFO 5918 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:46:27.030  INFO 5918 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:46:27.056  INFO 5918 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3476ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:46:27.095  INFO 5918 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:46:27.119  INFO 5918 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 15:46:27.127  INFO 5918 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:46:27.127  INFO 5918 --- [           main] org.eclipse.jetty.server.Server          : Started @3547ms
2023-12-14 15:46:27.132  INFO 5918 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:46:27.132  INFO 5918 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:46:27.132  INFO 5918 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 296ms (build:38ms init:156ms start:102ms)
2023-12-14 15:46:27.136  INFO 5918 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.178 seconds (JVM running for 3.557)
Execution successful.

2023-12-14 15:48:21.950  INFO 5053 --- [qtp1201614274-39] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@4d641c2d, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:48:21.952  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:48:21.952  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:48:21.954  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:48:21.968  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {5918}
2023-12-14 15:48:21.968  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5918: command not found
2023-12-14 15:48:21.968  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : kill: {5918}
2023-12-14 15:48:31.972  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:48:32.815  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:48:32.891  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:32.888  INFO 5973 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5973 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:48:32.891  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:32.890  INFO 5973 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:48:34.221  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:34.217  INFO 5973 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:48:34.232  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:34.225  INFO 5973 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:48:34.232  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:34.225  INFO 5973 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:48:34.276  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:34.270  INFO 5973 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:48:34.276  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:34.271  INFO 5973 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1326 ms
2023-12-14 15:48:35.251  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.239  INFO 5973 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:48:35.306  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.295  INFO 5973 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:48:35.307  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.296  INFO 5973 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:48:35.572  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.570  INFO 5973 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:48:35.596  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.593  INFO 5973 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3612ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:48:35.632  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.630  INFO 5973 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:48:35.655  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.651  INFO 5973 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:48:35.660  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.657  INFO 5973 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:48:35.660  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.658  INFO 5973 --- [           main] org.eclipse.jetty.server.Server          : Started @3676ms
2023-12-14 15:48:35.669  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.663  INFO 5973 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:48:35.669  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.663  INFO 5973 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:48:35.669  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.663  INFO 5973 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 297ms (build:40ms init:165ms start:92ms)
2023-12-14 15:48:35.669  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:48:35.667  INFO 5973 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.267 seconds (JVM running for 3.685)
2023-12-14 15:48:41.978  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 15:57:10.673  INFO 5053 --- [qtp1201614274-37] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@39a7a4bc, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 15:57:10.675  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 15:57:10.675  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 15:57:10.678  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 15:57:10.692  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {5973}
2023-12-14 15:57:10.693  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5973: command not found
2023-12-14 15:57:10.694  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : kill: {5973}
2023-12-14 15:57:10.697  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 15:57:10.699  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 15:57:10.699  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 15:57:10.699  INFO 5053 --- [qtp1201614274-39] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 15:57:15.704  INFO 5053 --- [Camel (camel-1) thread #9 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {5918}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5918: command not found
kill: {5918}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:48:32.888  INFO 5973 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 5973 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:48:32.890  INFO 5973 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:48:34.217  INFO 5973 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:48:34.225  INFO 5973 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:48:34.225  INFO 5973 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:48:34.270  INFO 5973 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:48:34.271  INFO 5973 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1326 ms
2023-12-14 15:48:35.239  INFO 5973 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:48:35.295  INFO 5973 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:48:35.296  INFO 5973 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:48:35.570  INFO 5973 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:48:35.593  INFO 5973 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3612ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:48:35.630  INFO 5973 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:48:35.651  INFO 5973 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:48:35.657  INFO 5973 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:48:35.658  INFO 5973 --- [           main] org.eclipse.jetty.server.Server          : Started @3676ms
2023-12-14 15:48:35.663  INFO 5973 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:48:35.663  INFO 5973 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:48:35.663  INFO 5973 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 297ms (build:40ms init:165ms start:92ms)
2023-12-14 15:48:35.667  INFO 5973 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.267 seconds (JVM running for 3.685)
Execution successful.

2023-12-14 15:57:15.711 ERROR 5053 --- [qtp1201614274-38] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:277) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:381) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:825) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:223) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:555) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:1009) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:1086) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:285) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:269) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:896) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:206) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:161) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.copyStream(DefaultHttpBinding.java:500) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteDirectResponse(DefaultHttpBinding.java:566) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteResponse(DefaultHttpBinding.java:439) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.writeResponse(DefaultHttpBinding.java:362) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.component.jetty.CamelContinuationServlet.doService(CamelContinuationServlet.java:282) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar!/:3.1.0]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.component.jetty.CamelFilterWrapper.doFilter(CamelFilterWrapper.java:51) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.Server.handleAsync(Server.java:559) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$2(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:439) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 43 common frames omitted

2023-12-14 15:57:20.696  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 15:57:21.522  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:57:21.523  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 15:57:21.523  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 15:57:21.523  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 15:57:21.523  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 15:57:21.523  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 15:57:21.523  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 15:57:21.523  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 15:57:21.523  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 15:57:21.584  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:21.579  INFO 6031 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6031 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:57:21.584  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:21.580  INFO 6031 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:57:22.828  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:22.823  INFO 6031 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:57:22.831  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:22.831  INFO 6031 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:57:22.831  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:22.831  INFO 6031 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:57:22.874  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:22.874  INFO 6031 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:57:22.874  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:22.874  INFO 6031 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1254 ms
2023-12-14 15:57:23.772  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:23.764  INFO 6031 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:57:23.823  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:23.812  INFO 6031 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:57:23.823  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:23.813  INFO 6031 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:57:24.075  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.072  INFO 6031 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:57:24.104  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.095  INFO 6031 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3390ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:57:24.133  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.130  INFO 6031 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:57:24.170  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.166  INFO 6031 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:57:24.176  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.172  INFO 6031 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:57:24.176  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.172  INFO 6031 --- [           main] org.eclipse.jetty.server.Server          : Started @3468ms
2023-12-14 15:57:24.190  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.179  INFO 6031 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:57:24.190  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.179  INFO 6031 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:57:24.190  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.179  INFO 6031 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 296ms (build:44ms init:146ms start:106ms)
2023-12-14 15:57:24.190  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 15:57:24.182  INFO 6031 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.076 seconds (JVM running for 3.478)
2023-12-14 15:57:30.702  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 16:00:21.254  INFO 5053 --- [qtp1201614274-41] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@5159b84, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:00:21.256  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:00:21.257  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:00:21.259  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 16:00:21.271  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {6031}
2023-12-14 16:00:21.272  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6031: command not found
2023-12-14 16:00:21.272  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : kill: {6031}
2023-12-14 16:00:21.279  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 16:00:21.281  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 16:00:21.281  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 16:00:21.281  INFO 5053 --- [qtp1201614274-37] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 16:00:26.284  INFO 5053 --- [Camel (camel-1) thread #5 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {5973}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 5973: command not found
kill: {5973}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 15:57:21.579  INFO 6031 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6031 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 15:57:21.580  INFO 6031 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 15:57:22.823  INFO 6031 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 15:57:22.831  INFO 6031 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 15:57:22.831  INFO 6031 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 15:57:22.874  INFO 6031 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 15:57:22.874  INFO 6031 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1254 ms
2023-12-14 15:57:23.764  INFO 6031 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 15:57:23.812  INFO 6031 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 15:57:23.813  INFO 6031 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 15:57:24.072  INFO 6031 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 15:57:24.095  INFO 6031 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3390ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 15:57:24.130  INFO 6031 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 15:57:24.166  INFO 6031 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 15:57:24.172  INFO 6031 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 15:57:24.172  INFO 6031 --- [           main] org.eclipse.jetty.server.Server          : Started @3468ms
2023-12-14 15:57:24.179  INFO 6031 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 15:57:24.179  INFO 6031 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 15:57:24.179  INFO 6031 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 296ms (build:44ms init:146ms start:106ms)
2023-12-14 15:57:24.182  INFO 6031 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.076 seconds (JVM running for 3.478)
Execution successful.

2023-12-14 16:00:26.292 ERROR 5053 --- [qtp1201614274-39] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:277) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:381) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:825) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:223) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:555) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:1009) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:1086) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:285) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:269) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:896) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:206) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:161) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.copyStream(DefaultHttpBinding.java:500) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteDirectResponse(DefaultHttpBinding.java:566) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteResponse(DefaultHttpBinding.java:439) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.writeResponse(DefaultHttpBinding.java:362) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.component.jetty.CamelContinuationServlet.doService(CamelContinuationServlet.java:282) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar!/:3.1.0]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.component.jetty.CamelFilterWrapper.doFilter(CamelFilterWrapper.java:51) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.Server.handleAsync(Server.java:559) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$2(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:439) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 43 common frames omitted

2023-12-14 16:00:31.275  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 16:00:32.050  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:00:32.050  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 16:00:32.050  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 16:00:32.050  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 16:00:32.050  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 16:00:32.050  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 16:00:32.050  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 16:00:32.051  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 16:00:32.051  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:00:32.128  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:32.113  INFO 6108 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6108 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:00:32.128  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:32.127  INFO 6108 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:00:33.429  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:33.425  INFO 6108 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:00:33.440  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:33.433  INFO 6108 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:00:33.440  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:33.433  INFO 6108 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:00:33.478  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:33.477  INFO 6108 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:00:33.478  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:33.477  INFO 6108 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1264 ms
2023-12-14 16:00:34.453  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.444  INFO 6108 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:00:34.509  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.498  INFO 6108 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:00:34.509  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.499  INFO 6108 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:00:34.786  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.777  INFO 6108 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:00:34.810  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.801  INFO 6108 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3521ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:00:34.842  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.839  INFO 6108 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:00:34.867  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.865  INFO 6108 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 16:00:34.874  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.871  INFO 6108 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:00:34.874  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.871  INFO 6108 --- [           main] org.eclipse.jetty.server.Server          : Started @3591ms
2023-12-14 16:00:34.885  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.877  INFO 6108 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:00:34.885  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.877  INFO 6108 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:00:34.885  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.877  INFO 6108 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 310ms (build:47ms init:163ms start:100ms)
2023-12-14 16:00:34.885  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:00:34.880  INFO 6108 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.233 seconds (JVM running for 3.601)
2023-12-14 16:00:41.279  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 16:01:23.377  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 16:01:23.380  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 16:01:23.380  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 16:01:23.380  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 16:01:28.381  INFO 5053 --- [Camel (camel-1) thread #10 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {6031}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6031: command not found
kill: {6031}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 16:00:32.113  INFO 6108 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6108 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:00:32.127  INFO 6108 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:00:33.425  INFO 6108 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:00:33.433  INFO 6108 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:00:33.433  INFO 6108 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:00:33.477  INFO 6108 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:00:33.477  INFO 6108 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1264 ms
2023-12-14 16:00:34.444  INFO 6108 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:00:34.498  INFO 6108 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:00:34.499  INFO 6108 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:00:34.777  INFO 6108 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:00:34.801  INFO 6108 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3521ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:00:34.839  INFO 6108 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:00:34.865  INFO 6108 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 16:00:34.871  INFO 6108 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:00:34.871  INFO 6108 --- [           main] org.eclipse.jetty.server.Server          : Started @3591ms
2023-12-14 16:00:34.877  INFO 6108 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:00:34.877  INFO 6108 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:00:34.877  INFO 6108 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 310ms (build:47ms init:163ms start:100ms)
2023-12-14 16:00:34.880  INFO 6108 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.233 seconds (JVM running for 3.601)
Execution successful.

2023-12-14 16:01:28.396 ERROR 5053 --- [qtp1201614274-38] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.completeWrite(WriteFlusher.java:378) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:119) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:300) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 11 common frames omitted

2023-12-14 16:01:31.329  INFO 5053 --- [qtp1201614274-41] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@60897fae, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:01:31.330  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:01:31.331  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:01:31.333  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 16:01:31.343  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 16:01:31.343  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 16:01:31.343  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 16:01:31.344  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 16:01:41.347  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 16:01:42.073  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:01:42.074  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 16:01:42.074  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 16:01:42.074  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 16:01:42.074  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 16:01:42.074  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 16:01:42.074  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 16:01:42.077  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 16:01:42.077  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:01:42.159  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:42.151  INFO 6175 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6175 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:01:42.159  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:42.152  INFO 6175 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:01:43.519  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:43.511  INFO 6175 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:01:43.526  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:43.519  INFO 6175 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:01:43.526  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:43.519  INFO 6175 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:01:43.566  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:43.561  INFO 6175 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:01:43.566  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:43.561  INFO 6175 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1343 ms
2023-12-14 16:01:44.555  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.542  INFO 6175 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:01:44.590  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.586  INFO 6175 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:01:44.591  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.587  INFO 6175 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:01:44.868  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.866  INFO 6175 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:01:44.900  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.890  INFO 6175 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3536ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:01:44.961  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.960  INFO 6175 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:01:44.985  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.983  INFO 6175 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b00ad9{/,null,AVAILABLE}
2023-12-14 16:01:44.993  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.990  INFO 6175 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@8b91134{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:01:44.993  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.990  INFO 6175 --- [           main] org.eclipse.jetty.server.Server          : Started @3637ms
2023-12-14 16:01:45.004  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.996  INFO 6175 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:01:45.004  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.996  INFO 6175 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:01:45.004  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:44.996  INFO 6175 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 336ms (build:46ms init:161ms start:129ms)
2023-12-14 16:01:45.004  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:01:45.000  INFO 6175 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.294 seconds (JVM running for 3.646)
2023-12-14 16:01:51.352  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 16:01:51.357  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 16:01:51.360  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 16:01:51.360  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 16:01:51.360  INFO 5053 --- [qtp1201614274-41] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 16:01:56.364  INFO 5053 --- [Camel (camel-1) thread #3 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 16:01:42.151  INFO 6175 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6175 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:01:42.152  INFO 6175 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:01:43.511  INFO 6175 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:01:43.519  INFO 6175 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:01:43.519  INFO 6175 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:01:43.561  INFO 6175 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:01:43.561  INFO 6175 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1343 ms
2023-12-14 16:01:44.542  INFO 6175 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:01:44.586  INFO 6175 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:01:44.587  INFO 6175 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:01:44.866  INFO 6175 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:01:44.890  INFO 6175 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3536ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:01:44.960  INFO 6175 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:01:44.983  INFO 6175 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b00ad9{/,null,AVAILABLE}
2023-12-14 16:01:44.990  INFO 6175 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@8b91134{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:01:44.990  INFO 6175 --- [           main] org.eclipse.jetty.server.Server          : Started @3637ms
2023-12-14 16:01:44.996  INFO 6175 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:01:44.996  INFO 6175 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:01:44.996  INFO 6175 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 336ms (build:46ms init:161ms start:129ms)
2023-12-14 16:01:45.000  INFO 6175 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.294 seconds (JVM running for 3.646)
Execution successful.

2023-12-14 16:02:49.687  INFO 5053 --- [qtp1201614274-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@341c6018, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:02:49.689  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:02:49.689  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:02:49.691  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 16:02:49.716  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {6175}
2023-12-14 16:02:49.716  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6175: command not found
2023-12-14 16:02:49.717  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {6175}
2023-12-14 16:02:59.721  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 16:03:00.514  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:03:00.514  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 16:03:00.514  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 16:03:00.514  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 16:03:00.514  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 16:03:00.514  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 16:03:00.514  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 16:03:00.518  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 16:03:00.518  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:03:00.626  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:00.616  INFO 6230 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6230 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:03:00.626  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:00.617  INFO 6230 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:03:01.862  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:01.858  INFO 6230 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:03:01.874  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:01.870  INFO 6230 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:03:01.874  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:01.870  INFO 6230 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:03:01.950  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:01.941  INFO 6230 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:03:01.950  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:01.941  INFO 6230 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1291 ms
2023-12-14 16:03:03.001  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.000  INFO 6230 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:03:03.058  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.047  INFO 6230 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:03:03.058  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.048  INFO 6230 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:03:03.318  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.313  INFO 6230 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:03:03.351  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.350  INFO 6230 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3621ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:03:03.391  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.388  INFO 6230 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:03:03.410  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.407  INFO 6230 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@624a24f6{/,null,AVAILABLE}
2023-12-14 16:03:03.417  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.414  INFO 6230 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@3bae64d0{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:03:03.417  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.414  INFO 6230 --- [           main] org.eclipse.jetty.server.Server          : Started @3685ms
2023-12-14 16:03:03.432  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.422  INFO 6230 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:03:03.432  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.422  INFO 6230 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:03:03.432  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.422  INFO 6230 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 298ms (build:45ms init:145ms start:108ms)
2023-12-14 16:03:03.432  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:03:03.425  INFO 6230 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.306 seconds (JVM running for 3.696)
2023-12-14 16:03:09.727  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 16:13:30.410  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 16:13:30.411  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 16:13:30.411  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 16:13:30.411  INFO 5053 --- [qtp1201614274-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 16:14:02.415  INFO 6320 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6320 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 16:14:02.417  INFO 6320 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 16:14:03.648  INFO 6320 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 16:14:03.655  INFO 6320 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:14:03.655  INFO 6320 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:14:03.709  INFO 6320 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:14:03.709  INFO 6320 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1246 ms
2023-12-14 16:14:04.744  INFO 6320 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:14:04.799  INFO 6320 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:14:04.801  INFO 6320 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 16:14:05.047  INFO 6320 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:14:05.094  INFO 6320 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3427ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:14:05.130  INFO 6320 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:14:05.148  INFO 6320 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 16:14:05.157  INFO 6320 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 16:14:05.157  INFO 6320 --- [main] org.eclipse.jetty.server.Server          : Started @3490ms
2023-12-14 16:14:05.164  INFO 6320 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:14:05.164  INFO 6320 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 16:14:05.164  INFO 6320 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 303ms (build:43ms init:144ms start:116ms)
2023-12-14 16:14:05.168  INFO 6320 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.152 seconds (JVM running for 3.501)
2023-12-14 16:14:39.633  INFO 6320 --- [qtp1776312161-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@1785f26c, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:14:39.648  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:14:39.649  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:14:39.656  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 16:14:39.663  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 16:14:39.663  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 16:14:39.664  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 16:14:39.664  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 16:14:49.670  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 16:14:50.432  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:14:50.432  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 16:14:50.432  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 16:14:50.432  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 16:14:50.432  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 16:14:50.432  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 16:14:50.432  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 16:14:50.432  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 16:14:50.433  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:14:50.513  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:50.510  INFO 6378 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6378 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:14:50.513  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:50.512  INFO 6378 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:14:51.770  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:51.764  INFO 6378 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:14:51.780  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:51.773  INFO 6378 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:14:51.780  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:51.773  INFO 6378 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:14:51.828  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:51.823  INFO 6378 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:14:51.828  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:51.823  INFO 6378 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1194 ms
2023-12-14 16:14:52.811  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:52.799  INFO 6378 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:14:52.859  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:52.849  INFO 6378 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:14:52.859  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:52.850  INFO 6378 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:14:53.131  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.121  INFO 6378 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:14:53.166  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.156  INFO 6378 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3479ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:14:53.199  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.196  INFO 6378 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:14:53.221  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.218  INFO 6378 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 16:14:53.229  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.225  INFO 6378 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:14:53.229  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.225  INFO 6378 --- [           main] org.eclipse.jetty.server.Server          : Started @3549ms
2023-12-14 16:14:53.246  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.232  INFO 6378 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:14:53.246  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.232  INFO 6378 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:14:53.246  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.232  INFO 6378 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 317ms (build:40ms init:167ms start:110ms)
2023-12-14 16:14:53.247  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:14:53.236  INFO 6378 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.198 seconds (JVM running for 3.559)
2023-12-14 16:14:59.679  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 16:24:27.972  INFO 6320 --- [qtp1776312161-37] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@34194e9e, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:24:27.976  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:24:27.976  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:24:27.984  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 16:24:27.995  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {6378}
2023-12-14 16:24:27.996  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6378: command not found
2023-12-14 16:24:27.997  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : kill: {6378}
2023-12-14 16:24:28.001  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 16:24:28.043  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 16:24:28.043  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 16:24:28.044  INFO 6320 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 16:24:33.078  INFO 6320 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...Running PID: {}/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not foundkill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]kill: {}Deploy Project....  .   ____          _            __ _ _ /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/  ___)| |_)| | | | | || (_| |  ) ) ) )  '  |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot ::                (v2.7.7)2023-12-14 16:14:50.510  INFO 6378 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6378 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)2023-12-14 16:14:50.512  INFO 6378 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"2023-12-14 16:14:51.764  INFO 6378 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)2023-12-14 16:14:51.773  INFO 6378 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]2023-12-14 16:14:51.773  INFO 6378 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]2023-12-14 16:14:51.823  INFO 6378 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext2023-12-14 16:14:51.823  INFO 6378 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1194 ms2023-12-14 16:14:52.799  INFO 6378 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'2023-12-14 16:14:52.849  INFO 6378 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]2023-12-14 16:14:52.850  INFO 6378 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''2023-12-14 16:14:53.121  INFO 6378 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting2023-12-14 16:14:53.156  INFO 6378 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3479ms to org.eclipse.jetty.util.log.Slf4jLog2023-12-14 16:14:53.196  INFO 6378 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS2023-12-14 16:14:53.218  INFO 6378 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}2023-12-14 16:14:53.225  INFO 6378 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}2023-12-14 16:14:53.225  INFO 6378 --- [           main] org.eclipse.jetty.server.Server          : Started @3549ms2023-12-14 16:14:53.232  INFO 6378 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)2023-12-14 16:14:53.232  INFO 6378 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)2023-12-14 16:14:53.232  INFO 6378 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 317ms (build:40ms init:167ms start:110ms)2023-12-14 16:14:53.236  INFO 6378 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.198 seconds (JVM running for 3.559)Execution successful.
2023-12-14 16:24:33.111 ERROR 6320 --- [qtp1776312161-39] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:277) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:381) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:825) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:223) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:555) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:1009) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:1086) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:285) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:269) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:896) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:206) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:161) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.copyStream(DefaultHttpBinding.java:500) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteDirectResponse(DefaultHttpBinding.java:566) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteResponse(DefaultHttpBinding.java:439) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.writeResponse(DefaultHttpBinding.java:362) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.component.jetty.CamelContinuationServlet.doService(CamelContinuationServlet.java:282) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar!/:3.1.0]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.component.jetty.CamelFilterWrapper.doFilter(CamelFilterWrapper.java:51) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.Server.handleAsync(Server.java:559) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$2(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:439) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 43 common frames omitted

2023-12-14 16:24:38.000  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 16:24:38.745  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:24:38.823  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:38.818  INFO 6437 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6437 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:24:38.835  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:38.831  INFO 6437 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:24:40.130  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:40.122  INFO 6437 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:24:40.139  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:40.131  INFO 6437 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:24:40.139  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:40.132  INFO 6437 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:24:40.197  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:40.193  INFO 6437 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:24:40.197  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:40.193  INFO 6437 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1296 ms
2023-12-14 16:24:41.126  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.120  INFO 6437 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:24:41.174  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.165  INFO 6437 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:24:41.174  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.166  INFO 6437 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:24:41.444  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.440  INFO 6437 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:24:41.471  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.470  INFO 6437 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3459ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:24:41.508  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.507  INFO 6437 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:24:41.555  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.551  INFO 6437 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 16:24:41.560  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.557  INFO 6437 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:24:41.560  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.557  INFO 6437 --- [           main] org.eclipse.jetty.server.Server          : Started @3547ms
2023-12-14 16:24:41.567  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.565  INFO 6437 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:24:41.568  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.565  INFO 6437 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:24:41.568  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.565  INFO 6437 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 345ms (build:50ms init:170ms start:125ms)
2023-12-14 16:24:41.579  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:24:41.569  INFO 6437 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.219 seconds (JVM running for 3.559)
2023-12-14 16:24:48.007  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 16:24:48.010  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 16:24:48.012  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 16:24:48.012  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 16:24:48.013  INFO 6320 --- [qtp1776312161-37] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 16:24:53.019  INFO 6320 --- [Camel (camel-1) thread #2 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...Running PID: {6378}/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6378: command not foundkill: {6378}Deploy Project....  .   ____          _            __ _ _ /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/  ___)| |_)| | | | | || (_| |  ) ) ) )  '  |____| .__|_| |_|_| |_\__, | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot ::                (v2.7.7)2023-12-14 16:24:38.818  INFO 6437 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6437 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)2023-12-14 16:24:38.831  INFO 6437 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"2023-12-14 16:24:40.122  INFO 6437 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)2023-12-14 16:24:40.131  INFO 6437 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]2023-12-14 16:24:40.132  INFO 6437 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]2023-12-14 16:24:40.193  INFO 6437 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext2023-12-14 16:24:40.193  INFO 6437 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1296 ms2023-12-14 16:24:41.120  INFO 6437 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'2023-12-14 16:24:41.165  INFO 6437 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]2023-12-14 16:24:41.166  INFO 6437 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''2023-12-14 16:24:41.440  INFO 6437 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting2023-12-14 16:24:41.470  INFO 6437 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3459ms to org.eclipse.jetty.util.log.Slf4jLog2023-12-14 16:24:41.507  INFO 6437 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS2023-12-14 16:24:41.551  INFO 6437 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}2023-12-14 16:24:41.557  INFO 6437 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}2023-12-14 16:24:41.557  INFO 6437 --- [           main] org.eclipse.jetty.server.Server          : Started @3547ms2023-12-14 16:24:41.565  INFO 6437 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)2023-12-14 16:24:41.565  INFO 6437 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)2023-12-14 16:24:41.565  INFO 6437 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 345ms (build:50ms init:170ms start:125ms)2023-12-14 16:24:41.569  INFO 6437 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.219 seconds (JVM running for 3.559)Execution successful.
2023-12-14 16:25:06.616  INFO 6320 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is shutting down (timeout:45s)
2023-12-14 16:25:06.627  INFO 6320 --- [Camel (camel-1) thread #3 - ShutdownTask] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 16:25:06.629  INFO 6320 --- [Camel (camel-1) thread #3 - ShutdownTask] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@221dad51{/,null,STOPPED}
2023-12-14 16:25:06.637  INFO 6320 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (stopped:1)
2023-12-14 16:25:06.637  INFO 6320 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   :     Stopped dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 16:25:06.640  INFO 6320 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) shutdown in 24ms (uptime:11m1s)
2023-12-14 16:25:06.646  INFO 6320 --- [SpringApplicationShutdownHook] o.a.c.c.s.CamelHttpTransportServlet      : Destroyed CamelHttpTransportServlet[CamelServlet]
2023-12-14 16:25:34.311  INFO 6530 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6530 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 16:25:34.313  INFO 6530 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 16:25:35.616  INFO 6530 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 16:25:35.624  INFO 6530 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:25:35.624  INFO 6530 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:25:35.668  INFO 6530 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:25:35.668  INFO 6530 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1275 ms
2023-12-14 16:25:36.648  INFO 6530 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:25:36.692  INFO 6530 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:25:36.693  INFO 6530 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 16:25:36.985  INFO 6530 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:25:37.011  INFO 6530 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3559ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:25:37.050  INFO 6530 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:25:37.075  INFO 6530 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@4f453e63{/,null,AVAILABLE}
2023-12-14 16:25:37.081  INFO 6530 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@7e736350{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 16:25:37.081  INFO 6530 --- [main] org.eclipse.jetty.server.Server          : Started @3630ms
2023-12-14 16:25:37.086  INFO 6530 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:25:37.087  INFO 6530 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 16:25:37.087  INFO 6530 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 335ms (build:44ms init:190ms start:101ms)
2023-12-14 16:25:37.090  INFO 6530 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.242 seconds (JVM running for 3.639)
2023-12-14 16:25:48.844  INFO 6530 --- [qtp199041063-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@6c16ff2, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:25:48.860  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:25:48.861  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:25:48.879  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 16:25:48.888  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {6437}
2023-12-14 16:25:48.890  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6437: command not found
2023-12-14 16:25:48.891  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {6437}
2023-12-14 16:25:58.899  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 16:25:59.778  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:25:59.848  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:25:59.840  INFO 6587 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6587 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:25:59.848  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:25:59.842  INFO 6587 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:26:01.117  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:01.116  INFO 6587 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:26:01.128  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:01.124  INFO 6587 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:26:01.128  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:01.124  INFO 6587 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:26:01.189  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:01.184  INFO 6587 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:26:01.189  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:01.184  INFO 6587 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1299 ms
2023-12-14 16:26:02.193  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.192  INFO 6587 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:26:02.247  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.238  INFO 6587 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:26:02.247  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.239  INFO 6587 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:26:02.540  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.534  INFO 6587 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:26:02.562  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.559  INFO 6587 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3653ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:26:02.605  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.598  INFO 6587 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:26:02.624  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.618  INFO 6587 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 16:26:02.635  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.624  INFO 6587 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:26:02.635  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.625  INFO 6587 --- [           main] org.eclipse.jetty.server.Server          : Started @3719ms
2023-12-14 16:26:02.635  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.632  INFO 6587 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:26:02.635  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.633  INFO 6587 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:26:02.635  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.633  INFO 6587 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 292ms (build:38ms init:156ms start:98ms)
2023-12-14 16:26:02.646  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:02.636  INFO 6587 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.317 seconds (JVM running for 3.73)
2023-12-14 16:26:08.906  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 16:26:08.911  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 16:26:08.965  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 16:26:08.965  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 16:26:08.966  INFO 6530 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 16:26:14.000  INFO 6530 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {6437}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6437: command not found
kill: {6437}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 16:25:59.840  INFO 6587 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6587 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:25:59.842  INFO 6587 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:26:01.116  INFO 6587 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:26:01.124  INFO 6587 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:26:01.124  INFO 6587 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:26:01.184  INFO 6587 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:26:01.184  INFO 6587 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1299 ms
2023-12-14 16:26:02.192  INFO 6587 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:26:02.238  INFO 6587 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:26:02.239  INFO 6587 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:26:02.534  INFO 6587 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:26:02.559  INFO 6587 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3653ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:26:02.598  INFO 6587 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:26:02.618  INFO 6587 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 16:26:02.624  INFO 6587 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:26:02.625  INFO 6587 --- [           main] org.eclipse.jetty.server.Server          : Started @3719ms
2023-12-14 16:26:02.632  INFO 6587 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:26:02.633  INFO 6587 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:26:02.633  INFO 6587 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 292ms (build:38ms init:156ms start:98ms)
2023-12-14 16:26:02.636  INFO 6587 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.317 seconds (JVM running for 3.73)
Execution successful.

2023-12-14 16:26:21.127  INFO 6530 --- [qtp199041063-32] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@6c16ff2, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:26:21.129  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:26:21.129  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:26:21.132  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 16:26:21.144  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {6587}
2023-12-14 16:26:21.144  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6587: command not found
2023-12-14 16:26:21.147  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : kill: {6587}
2023-12-14 16:26:31.150  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 16:26:31.901  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:26:31.901  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 16:26:31.901  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 16:26:31.901  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 16:26:31.901  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 16:26:31.902  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 16:26:31.902  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 16:26:31.902  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 16:26:31.902  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:26:31.985  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:31.972  INFO 6646 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6646 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:26:31.985  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:31.980  INFO 6646 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:26:33.177  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:33.174  INFO 6646 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:26:33.188  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:33.182  INFO 6646 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:26:33.188  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:33.182  INFO 6646 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:26:33.233  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:33.233  INFO 6646 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:26:33.233  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:33.233  INFO 6646 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1201 ms
2023-12-14 16:26:34.157  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.156  INFO 6646 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:26:34.220  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.207  INFO 6646 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:26:34.220  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.208  INFO 6646 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:26:34.464  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.455  INFO 6646 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:26:34.488  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.479  INFO 6646 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3321ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:26:34.520  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.515  INFO 6646 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:26:34.550  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.545  INFO 6646 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 16:26:34.558  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.553  INFO 6646 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:26:34.558  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.553  INFO 6646 --- [           main] org.eclipse.jetty.server.Server          : Started @3395ms
2023-12-14 16:26:34.565  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.561  INFO 6646 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:26:34.566  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.561  INFO 6646 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:26:34.566  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.561  INFO 6646 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 296ms (build:44ms init:147ms start:105ms)
2023-12-14 16:26:34.566  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:26:34.565  INFO 6646 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.046 seconds (JVM running for 3.407)
2023-12-14 16:26:41.155  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 16:26:41.159  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 16:26:41.164  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 16:26:41.164  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 16:26:41.164  INFO 6530 --- [qtp199041063-32] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 16:26:46.166  INFO 6530 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {6587}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6587: command not found
kill: {6587}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 16:26:31.972  INFO 6646 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6646 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:26:31.980  INFO 6646 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:26:33.174  INFO 6646 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:26:33.182  INFO 6646 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:26:33.182  INFO 6646 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:26:33.233  INFO 6646 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:26:33.233  INFO 6646 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1201 ms
2023-12-14 16:26:34.156  INFO 6646 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:26:34.207  INFO 6646 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:26:34.208  INFO 6646 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:26:34.455  INFO 6646 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:26:34.479  INFO 6646 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3321ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:26:34.515  INFO 6646 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:26:34.545  INFO 6646 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 16:26:34.553  INFO 6646 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:26:34.553  INFO 6646 --- [           main] org.eclipse.jetty.server.Server          : Started @3395ms
2023-12-14 16:26:34.561  INFO 6646 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:26:34.561  INFO 6646 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:26:34.561  INFO 6646 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 296ms (build:44ms init:147ms start:105ms)
2023-12-14 16:26:34.565  INFO 6646 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.046 seconds (JVM running for 3.407)
Execution successful.

2023-12-14 16:53:18.672  INFO 6530 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is shutting down (timeout:45s)
2023-12-14 16:53:18.685  INFO 6530 --- [Camel (camel-1) thread #3 - ShutdownTask] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@7e736350{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 16:53:18.687  INFO 6530 --- [Camel (camel-1) thread #3 - ShutdownTask] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@4f453e63{/,null,STOPPED}
2023-12-14 16:53:18.695  INFO 6530 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (stopped:1)
2023-12-14 16:53:18.695  INFO 6530 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   :     Stopped dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 16:53:18.697  INFO 6530 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) shutdown in 25ms (uptime:27m41s)
2023-12-14 16:53:18.707  INFO 6530 --- [SpringApplicationShutdownHook] o.a.c.c.s.CamelHttpTransportServlet      : Destroyed CamelHttpTransportServlet[CamelServlet]
2023-12-14 16:53:54.750  INFO 6757 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6757 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 16:53:54.752  INFO 6757 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 16:53:55.989  INFO 6757 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 16:53:55.998  INFO 6757 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:53:55.998  INFO 6757 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:53:56.045  INFO 6757 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:53:56.045  INFO 6757 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1213 ms
2023-12-14 16:53:57.029  INFO 6757 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:53:57.072  INFO 6757 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:53:57.074  INFO 6757 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 16:53:57.344  INFO 6757 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:53:57.370  INFO 6757 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3567ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:53:57.412  INFO 6757 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:53:57.431  INFO 6757 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@4f453e63{/,null,AVAILABLE}
2023-12-14 16:53:57.439  INFO 6757 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@7e736350{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 16:53:57.439  INFO 6757 --- [main] org.eclipse.jetty.server.Server          : Started @3636ms
2023-12-14 16:53:57.444  INFO 6757 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:53:57.444  INFO 6757 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 16:53:57.444  INFO 6757 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 297ms (build:42ms init:155ms start:100ms)
2023-12-14 16:53:57.448  INFO 6757 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.228 seconds (JVM running for 3.645)
2023-12-14 16:54:14.153  INFO 6757 --- [qtp199041063-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@5feb7205, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:54:14.170  INFO 6757 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:54:14.171  INFO 6757 --- [qtp199041063-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:55:51.290  INFO 6757 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is shutting down (timeout:45s)
2023-12-14 16:55:51.308  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:55:52.311  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 44 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:55:53.315  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 43 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:55:54.318  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 42 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:55:55.322  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 41 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:55:56.326  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 40 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:55:57.329  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 39 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:55:58.332  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 38 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:55:59.336  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 37 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:00.339  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 36 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:01.344  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 35 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:02.349  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 34 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:03.353  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 33 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:04.358  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 32 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:05.361  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 31 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:06.364  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 30 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:07.366  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 29 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:08.369  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 28 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:09.374  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 27 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:10.377  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 26 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:11.378  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 25 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:12.379  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 24 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:13.381  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 23 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:14.387  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 22 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:15.390  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 21 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:16.393  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 20 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:17.394  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 19 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:18.396  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 18 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:19.398  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 17 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:20.398  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 16 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:21.404  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 15 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:22.407  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 14 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:23.411  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 13 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:24.415  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 12 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:25.420  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 11 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:26.423  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 10 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:27.426  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 9 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:28.429  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 8 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:29.434  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 7 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:30.439  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 6 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:31.441  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 5 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:32.444  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 4 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:33.448  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 3 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:34.452  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 2 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:35.454  INFO 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 1 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 16:56:36.301  WARN 6757 --- [SpringApplicationShutdownHook] o.a.c.i.engine.DefaultShutdownStrategy   : Timeout occurred during graceful shutdown. Forcing the routes to be shutdown now. Notice: some resources may still be running as graceful shutdown did not complete successfully.
2023-12-14 16:56:36.302  WARN 6757 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Interrupted while waiting during graceful shutdown, will force shutdown now.
2023-12-14 16:56:36.314  INFO 6757 --- [SpringApplicationShutdownHook] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@7e736350{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 16:56:36.316  INFO 6757 --- [SpringApplicationShutdownHook] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@4f453e63{/,null,STOPPED}
2023-12-14 16:57:06.318  WARN 6757 --- [SpringApplicationShutdownHook] o.e.jetty.util.thread.QueuedThreadPool   : QueuedThreadPool[qtp199041063]@bdd2027{STOPPING,8<=0<=200,i=7,r=-1,q=0}[NO_TRY] Couldn't stop Thread[qtp199041063-36,5,main]
2023-12-14 16:57:06.324  INFO 6757 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (total:1 stopped:1 forced:1)
2023-12-14 16:57:06.325  INFO 6757 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   :     Forced stopped dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 16:57:06.326  WARN 6757 --- [SpringApplicationShutdownHook] o.a.c.i.e.DefaultInflightRepository      : Shutting down while there are still 1 inflight exchanges.
2023-12-14 16:57:06.328  INFO 6757 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) shutdown in 1m15s38ms (uptime:3m8s)
2023-12-14 16:57:06.337  INFO 6757 --- [SpringApplicationShutdownHook] o.a.c.c.s.CamelHttpTransportServlet      : Destroyed CamelHttpTransportServlet[CamelServlet]
2023-12-14 16:57:09.429  INFO 6890 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6890 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 16:57:09.433  INFO 6890 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 16:57:10.718  INFO 6890 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 16:57:10.734  INFO 6890 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:57:10.734  INFO 6890 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:57:10.790  INFO 6890 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:57:10.791  INFO 6890 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1325 ms
2023-12-14 16:57:11.734  INFO 6890 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:57:11.779  INFO 6890 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:57:11.780  INFO 6890 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 16:57:12.035  INFO 6890 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:57:12.062  INFO 6890 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3414ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:57:12.099  INFO 6890 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:57:12.117  INFO 6890 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@7c9bdee9{/,null,AVAILABLE}
2023-12-14 16:57:12.125  INFO 6890 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@36b310aa{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 16:57:12.125  INFO 6890 --- [main] org.eclipse.jetty.server.Server          : Started @3477ms
2023-12-14 16:57:12.130  INFO 6890 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:57:12.130  INFO 6890 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 16:57:12.130  INFO 6890 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 285ms (build:38ms init:152ms start:95ms)
2023-12-14 16:57:12.133  INFO 6890 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.126 seconds (JVM running for 3.486)
2023-12-14 16:57:20.811  INFO 6890 --- [qtp837946527-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@19490185, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 16:57:20.826  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 16:57:20.827  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 16:57:20.832  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 16:57:20.848  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {6812}
2023-12-14 16:57:20.848  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6812: command not found
2023-12-14 16:57:20.849  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {6812}
2023-12-14 16:57:30.851  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 16:57:31.593  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:57:31.593  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 16:57:31.593  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 16:57:31.593  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 16:57:31.593  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 16:57:31.593  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 16:57:31.594  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 16:57:31.594  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 16:57:31.594  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 16:57:31.732  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:31.728  INFO 6946 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6946 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:57:31.732  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:31.730  INFO 6946 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:57:32.934  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:32.930  INFO 6946 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:57:32.945  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:32.939  INFO 6946 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:57:32.945  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:32.940  INFO 6946 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:57:32.999  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:32.997  INFO 6946 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:57:32.999  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:32.997  INFO 6946 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1220 ms
2023-12-14 16:57:33.886  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:33.877  INFO 6946 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:57:33.934  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:33.923  INFO 6946 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:57:33.934  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:33.925  INFO 6946 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:57:34.199  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.189  INFO 6946 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:57:34.220  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.215  INFO 6946 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3360ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:57:34.258  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.253  INFO 6946 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:57:34.295  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.290  INFO 6946 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 16:57:34.300  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.297  INFO 6946 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:57:34.300  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.297  INFO 6946 --- [           main] org.eclipse.jetty.server.Server          : Started @3442ms
2023-12-14 16:57:34.311  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.303  INFO 6946 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:57:34.311  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.303  INFO 6946 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:57:34.311  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.303  INFO 6946 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 293ms (build:38ms init:141ms start:114ms)
2023-12-14 16:57:34.311  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 16:57:34.307  INFO 6946 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.105 seconds (JVM running for 3.452)
2023-12-14 16:57:40.858  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:24:03.547  INFO 6890 --- [qtp837946527-39] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@7049516d, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:24:03.550  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:24:03.550  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:24:03.555  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:24:03.567  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {6946}
2023-12-14 17:24:03.567  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6946: command not found
2023-12-14 17:24:03.567  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : kill: {6946}
2023-12-14 17:24:03.571  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:24:03.602  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:24:03.602  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:24:03.602  INFO 6890 --- [qtp837946527-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:24:08.638  INFO 6890 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {6812}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6812: command not found
kill: {6812}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 16:57:31.728  INFO 6946 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 6946 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 16:57:31.730  INFO 6946 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 16:57:32.930  INFO 6946 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 16:57:32.939  INFO 6946 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 16:57:32.940  INFO 6946 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 16:57:32.997  INFO 6946 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 16:57:32.997  INFO 6946 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1220 ms
2023-12-14 16:57:33.877  INFO 6946 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 16:57:33.923  INFO 6946 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 16:57:33.925  INFO 6946 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 16:57:34.189  INFO 6946 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 16:57:34.215  INFO 6946 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3360ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 16:57:34.253  INFO 6946 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 16:57:34.290  INFO 6946 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 16:57:34.297  INFO 6946 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 16:57:34.297  INFO 6946 --- [           main] org.eclipse.jetty.server.Server          : Started @3442ms
2023-12-14 16:57:34.303  INFO 6946 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 16:57:34.303  INFO 6946 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 16:57:34.303  INFO 6946 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 293ms (build:38ms init:141ms start:114ms)
2023-12-14 16:57:34.307  INFO 6946 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.105 seconds (JVM running for 3.452)
Execution successful.

2023-12-14 17:24:08.678 ERROR 6890 --- [qtp837946527-35] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.write(WriteFlusher.java:277) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.AbstractEndPoint.write(AbstractEndPoint.java:381) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection$SendCallback.process(HttpConnection.java:825) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.processing(IteratingCallback.java:241) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.IteratingCallback.iterate(IteratingCallback.java:223) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpConnection.send(HttpConnection.java:555) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.sendResponse(HttpChannel.java:1009) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.write(HttpChannel.java:1086) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:285) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.channelWrite(HttpOutput.java:269) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:896) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:206) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.util.IOHelper.copy(IOHelper.java:161) ~[camel-util-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.copyStream(DefaultHttpBinding.java:500) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteDirectResponse(DefaultHttpBinding.java:566) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.doWriteResponse(DefaultHttpBinding.java:439) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.DefaultHttpBinding.writeResponse(DefaultHttpBinding.java:362) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.component.jetty.CamelContinuationServlet.doService(CamelContinuationServlet.java:282) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:130) ~[camel-http-common-3.20.0.jar!/:3.20.0]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar!/:3.1.0]
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1656) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.apache.camel.component.jetty.CamelFilterWrapper.doFilter(CamelFilterWrapper.java:51) ~[camel-jetty-common-3.20.0.jar!/:3.20.0]
	at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1626) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:552) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1440) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:505) ~[jetty-servlet-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1355) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.Server.handleAsync(Server.java:559) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$2(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:732) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:495) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.server.HttpChannel.run(HttpChannel.java:439) ~[jetty-server-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 43 common frames omitted

2023-12-14 17:24:13.572  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:24:14.294  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:24:14.294  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:24:14.294  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:24:14.294  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:24:14.294  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:24:14.294  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:24:14.294  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:24:14.295  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:24:14.295  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:24:14.401  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:14.398  INFO 7018 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7018 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:24:14.401  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:14.400  INFO 7018 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:24:15.787  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:15.777  INFO 7018 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:24:15.787  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:15.786  INFO 7018 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:24:15.787  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:15.786  INFO 7018 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:24:15.842  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:15.835  INFO 7018 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:24:15.842  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:15.835  INFO 7018 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1383 ms
2023-12-14 17:24:16.759  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:16.758  INFO 7018 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:24:16.837  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:16.826  INFO 7018 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:24:16.837  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:16.827  INFO 7018 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:24:17.083  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.073  INFO 7018 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:24:17.107  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.097  INFO 7018 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3515ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:24:17.148  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.145  INFO 7018 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:24:17.175  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.171  INFO 7018 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 17:24:17.178  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.177  INFO 7018 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:24:17.178  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.177  INFO 7018 --- [           main] org.eclipse.jetty.server.Server          : Started @3595ms
2023-12-14 17:24:17.191  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.184  INFO 7018 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:24:17.191  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.184  INFO 7018 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:24:17.191  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.184  INFO 7018 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 278ms (build:37ms init:131ms start:110ms)
2023-12-14 17:24:17.191  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:24:17.187  INFO 7018 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.258 seconds (JVM running for 3.606)
2023-12-14 17:24:23.578  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:24:23.581  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:24:23.583  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:24:23.583  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:24:23.583  INFO 6890 --- [qtp837946527-39] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:24:28.593  INFO 6890 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {6946}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 6946: command not found
kill: {6946}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:24:14.398  INFO 7018 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7018 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:24:14.400  INFO 7018 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:24:15.777  INFO 7018 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:24:15.786  INFO 7018 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:24:15.786  INFO 7018 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:24:15.835  INFO 7018 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:24:15.835  INFO 7018 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1383 ms
2023-12-14 17:24:16.758  INFO 7018 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:24:16.826  INFO 7018 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:24:16.827  INFO 7018 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:24:17.073  INFO 7018 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:24:17.097  INFO 7018 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3515ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:24:17.145  INFO 7018 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:24:17.171  INFO 7018 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 17:24:17.177  INFO 7018 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:24:17.177  INFO 7018 --- [           main] org.eclipse.jetty.server.Server          : Started @3595ms
2023-12-14 17:24:17.184  INFO 7018 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:24:17.184  INFO 7018 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:24:17.184  INFO 7018 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 278ms (build:37ms init:131ms start:110ms)
2023-12-14 17:24:17.187  INFO 7018 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.258 seconds (JVM running for 3.606)
Execution successful.

2023-12-14 17:30:22.289  INFO 6890 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is shutting down (timeout:45s)
2023-12-14 17:30:22.304  INFO 6890 --- [Camel (camel-1) thread #3 - ShutdownTask] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@36b310aa{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:30:22.307  INFO 6890 --- [Camel (camel-1) thread #3 - ShutdownTask] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@7c9bdee9{/,null,STOPPED}
2023-12-14 17:30:22.314  INFO 6890 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (stopped:1)
2023-12-14 17:30:22.314  INFO 6890 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   :     Stopped dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:30:22.316  INFO 6890 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) shutdown in 27ms (uptime:33m10s)
2023-12-14 17:30:22.323  INFO 6890 --- [SpringApplicationShutdownHook] o.a.c.c.s.CamelHttpTransportServlet      : Destroyed CamelHttpTransportServlet[CamelServlet]
2023-12-14 17:30:47.767  INFO 7134 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7134 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 17:30:47.768  INFO 7134 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 17:30:49.169  INFO 7134 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 17:30:49.178  INFO 7134 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:30:49.178  INFO 7134 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:30:49.247  INFO 7134 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:30:49.247  INFO 7134 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1442 ms
2023-12-14 17:30:50.238  INFO 7134 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:30:50.284  INFO 7134 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:30:50.285  INFO 7134 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 17:30:50.533  INFO 7134 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:30:50.557  INFO 7134 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3657ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:30:50.605  INFO 7134 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:30:50.627  INFO 7134 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@771cbb1a{/,null,AVAILABLE}
2023-12-14 17:30:50.632  INFO 7134 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@6940f685{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:30:50.633  INFO 7134 --- [main] org.eclipse.jetty.server.Server          : Started @3733ms
2023-12-14 17:30:50.638  INFO 7134 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:30:50.638  INFO 7134 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:30:50.638  INFO 7134 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 296ms (build:44ms init:148ms start:104ms)
2023-12-14 17:30:50.642  INFO 7134 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.34 seconds (JVM running for 3.742)
2023-12-14 17:31:00.088  INFO 7134 --- [qtp1930319715-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@510ef204, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:31:00.104  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:31:00.105  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:31:00.115  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:31:00.124  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7018}
2023-12-14 17:31:00.126  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7018: command not found
2023-12-14 17:31:00.127  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7018}
2023-12-14 17:31:10.134  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:31:10.813  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:31:10.873  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:10.866  INFO 7189 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7189 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:31:10.874  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:10.868  INFO 7189 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:31:12.115  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:12.113  INFO 7189 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:31:12.126  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:12.120  INFO 7189 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:31:12.126  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:12.120  INFO 7189 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:31:12.184  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:12.173  INFO 7189 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:31:12.184  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:12.173  INFO 7189 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1219 ms
2023-12-14 17:31:13.153  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.150  INFO 7189 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:31:13.217  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.207  INFO 7189 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:31:13.217  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.208  INFO 7189 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:31:13.512  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.511  INFO 7189 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:31:13.544  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.538  INFO 7189 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3398ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:31:13.581  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.578  INFO 7189 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:31:13.604  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.604  INFO 7189 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 17:31:13.616  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.610  INFO 7189 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:31:13.616  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.610  INFO 7189 --- [           main] org.eclipse.jetty.server.Server          : Started @3470ms
2023-12-14 17:31:13.627  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.618  INFO 7189 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:31:13.627  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.618  INFO 7189 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:31:13.627  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.618  INFO 7189 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 336ms (build:40ms init:190ms start:106ms)
2023-12-14 17:31:13.627  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:31:13.621  INFO 7189 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.146 seconds (JVM running for 3.481)
2023-12-14 17:31:13.649  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  :  
2023-12-14 17:31:20.140  INFO 7134 --- [qtp1930319715-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:35:02.718  INFO 7134 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is shutting down (timeout:45s)
2023-12-14 17:35:02.731  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:03.734  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 44 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:04.738  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 43 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:05.741  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 42 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:06.746  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 41 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:07.750  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 40 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:08.752  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 39 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:09.755  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 38 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:10.758  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 37 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:11.763  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 36 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:12.767  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 35 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:13.771  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 34 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:14.775  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 33 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:15.776  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 32 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:16.780  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 31 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:17.782  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 30 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:18.783  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 29 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:19.783  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 28 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:20.784  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 27 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:21.786  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 26 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:22.789  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 25 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:23.792  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 24 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:24.796  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 23 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:25.800  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 22 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:26.804  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 21 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:27.807  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 20 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:28.810  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 19 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:29.813  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 18 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:30.815  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 17 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:31.819  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 16 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:32.823  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 15 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:33.825  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 14 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:34.828  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 13 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:35.832  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 12 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:36.835  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 11 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:37.838  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 10 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:38.841  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 9 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:39.844  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 8 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:40.846  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 7 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:41.849  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 6 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:42.852  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 5 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:43.854  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 4 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:44.858  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 3 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:45.861  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 2 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:46.864  INFO 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 1 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:35:47.727  WARN 7134 --- [SpringApplicationShutdownHook] o.a.c.i.engine.DefaultShutdownStrategy   : Timeout occurred during graceful shutdown. Forcing the routes to be shutdown now. Notice: some resources may still be running as graceful shutdown did not complete successfully.
2023-12-14 17:35:47.730  WARN 7134 --- [Camel (camel-1) thread #1 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Interrupted while waiting during graceful shutdown, will force shutdown now.
2023-12-14 17:35:47.741  INFO 7134 --- [SpringApplicationShutdownHook] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@6940f685{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:35:47.744  INFO 7134 --- [SpringApplicationShutdownHook] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@771cbb1a{/,null,STOPPED}
2023-12-14 17:36:17.748  WARN 7134 --- [SpringApplicationShutdownHook] o.e.jetty.util.thread.QueuedThreadPool   : QueuedThreadPool[qtp1930319715]@730e5763{STOPPING,8<=0<=200,i=7,r=-1,q=0}[NO_TRY] Couldn't stop Thread[qtp1930319715-36,5,main]
2023-12-14 17:36:17.758  INFO 7134 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (total:1 stopped:1 forced:1)
2023-12-14 17:36:17.758  INFO 7134 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   :     Forced stopped dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:36:17.760  WARN 7134 --- [SpringApplicationShutdownHook] o.a.c.i.e.DefaultInflightRepository      : Shutting down while there are still 1 inflight exchanges.
2023-12-14 17:36:17.763  INFO 7134 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) shutdown in 1m15s45ms (uptime:5m27s)
2023-12-14 17:36:17.774  INFO 7134 --- [SpringApplicationShutdownHook] o.a.c.c.s.CamelHttpTransportServlet      : Destroyed CamelHttpTransportServlet[CamelServlet]
2023-12-14 17:36:29.154  INFO 7288 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7288 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 17:36:29.156  INFO 7288 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 17:36:30.405  INFO 7288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 17:36:30.414  INFO 7288 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:36:30.414  INFO 7288 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:36:30.462  INFO 7288 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:36:30.462  INFO 7288 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1260 ms
2023-12-14 17:36:31.416  INFO 7288 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:36:31.500  INFO 7288 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:36:31.501  INFO 7288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 17:36:31.759  INFO 7288 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:36:31.804  INFO 7288 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3481ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:36:31.852  INFO 7288 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:36:31.889  INFO 7288 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:36:31.896  INFO 7288 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:36:31.896  INFO 7288 --- [main] org.eclipse.jetty.server.Server          : Started @3572ms
2023-12-14 17:36:31.903  INFO 7288 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:36:31.903  INFO 7288 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:36:31.903  INFO 7288 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 322ms (build:42ms init:137ms start:143ms)
2023-12-14 17:36:31.906  INFO 7288 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.194 seconds (JVM running for 3.583)
2023-12-14 17:37:00.097  INFO 7288 --- [qtp1776312161-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@188d5f3, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:37:00.112  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:37:00.113  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:37:00.126  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:37:00.131  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7189}
2023-12-14 17:37:00.132  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7189: command not found
2023-12-14 17:37:00.133  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7189}
2023-12-14 17:37:10.141  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:37:10.919  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:37:10.919  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:37:10.960  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:37:10.960  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:37:20.146  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 141
2023-12-14 17:37:25.183  INFO 7288 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7189}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7189: command not found
kill: {7189}
Deploy Project....


2023-12-14 17:38:40.956  INFO 7288 --- [qtp1776312161-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@768f6c77, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:38:40.959  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:38:40.959  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:38:40.962  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:38:40.973  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {}
2023-12-14 17:38:40.974  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
2023-12-14 17:38:40.974  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
2023-12-14 17:38:40.974  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {}
2023-12-14 17:38:50.978  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:38:51.787  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:38:51.787  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:38:51.788  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:38:51.788  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:39:00.985  INFO 7288 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 141
2023-12-14 17:39:05.993  INFO 7288 --- [Camel (camel-1) thread #2 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: : command not found
kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]
kill: {}
Deploy Project....


2023-12-14 17:42:05.757  INFO 7288 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is shutting down (timeout:45s)
2023-12-14 17:42:05.765  INFO 7288 --- [Camel (camel-1) thread #3 - ShutdownTask] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:42:05.766  INFO 7288 --- [Camel (camel-1) thread #3 - ShutdownTask] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@221dad51{/,null,STOPPED}
2023-12-14 17:42:05.780  INFO 7288 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (stopped:1)
2023-12-14 17:42:05.781  INFO 7288 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   :     Stopped dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:42:05.783  INFO 7288 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) shutdown in 25ms (uptime:5m34s)
2023-12-14 17:42:05.792  INFO 7288 --- [SpringApplicationShutdownHook] o.a.c.c.s.CamelHttpTransportServlet      : Destroyed CamelHttpTransportServlet[CamelServlet]
2023-12-14 17:42:25.034  INFO 7494 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7494 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 17:42:25.036  INFO 7494 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 17:42:26.256  INFO 7494 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 17:42:26.264  INFO 7494 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:42:26.264  INFO 7494 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:42:26.313  INFO 7494 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:42:26.314  INFO 7494 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1202 ms
2023-12-14 17:42:27.264  INFO 7494 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:42:27.313  INFO 7494 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:42:27.314  INFO 7494 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 17:42:27.610  INFO 7494 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:42:27.636  INFO 7494 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3539ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:42:27.671  INFO 7494 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:42:27.689  INFO 7494 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:42:27.700  INFO 7494 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:42:27.700  INFO 7494 --- [main] org.eclipse.jetty.server.Server          : Started @3603ms
2023-12-14 17:42:27.708  INFO 7494 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:42:27.708  INFO 7494 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:42:27.708  INFO 7494 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 320ms (build:41ms init:182ms start:97ms)
2023-12-14 17:42:27.711  INFO 7494 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.221 seconds (JVM running for 3.614)
2023-12-14 17:42:36.357  INFO 7494 --- [qtp1776312161-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@7862dcd7, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:42:36.373  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:42:36.374  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:42:36.390  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:42:36.414  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7402}
2023-12-14 17:42:36.415  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7402: command not found
2023-12-14 17:42:36.415  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7402}
2023-12-14 17:42:46.427  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:42:47.224  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:42:47.224  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:42:47.224  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:42:47.224  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:42:47.224  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:42:47.224  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:42:47.225  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:42:47.225  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:42:47.225  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:42:47.314  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:47.291  INFO 7549 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7549 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:42:47.314  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:47.305  INFO 7549 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:42:48.629  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:48.624  INFO 7549 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:42:48.640  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:48.632  INFO 7549 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:42:48.640  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:48.633  INFO 7549 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:42:48.689  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:48.684  INFO 7549 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:42:48.689  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:48.684  INFO 7549 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1331 ms
2023-12-14 17:42:49.707  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:49.705  INFO 7549 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:42:49.780  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:49.769  INFO 7549 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:42:49.781  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:49.770  INFO 7549 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:42:50.041  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.040  INFO 7549 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:42:50.094  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.084  INFO 7549 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3647ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:42:50.128  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.125  INFO 7549 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:42:50.163  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.160  INFO 7549 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@7fc7c4a{/,null,AVAILABLE}
2023-12-14 17:42:50.171  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.167  INFO 7549 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@4d6ee47{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:42:50.171  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.167  INFO 7549 --- [           main] org.eclipse.jetty.server.Server          : Started @3731ms
2023-12-14 17:42:50.185  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.175  INFO 7549 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:42:50.185  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.175  INFO 7549 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:42:50.185  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.175  INFO 7549 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 328ms (build:45ms init:149ms start:134ms)
2023-12-14 17:42:50.185  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:42:50.179  INFO 7549 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.353 seconds (JVM running for 3.742)
2023-12-14 17:42:56.443  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:42:56.447  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:42:56.492  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:42:56.492  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:42:56.493  INFO 7494 --- [qtp1776312161-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:43:01.523  INFO 7494 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7402}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7402: command not found
kill: {7402}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:42:47.291  INFO 7549 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7549 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:42:47.305  INFO 7549 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:42:48.624  INFO 7549 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:42:48.632  INFO 7549 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:42:48.633  INFO 7549 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:42:48.684  INFO 7549 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:42:48.684  INFO 7549 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1331 ms
2023-12-14 17:42:49.705  INFO 7549 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:42:49.769  INFO 7549 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:42:49.770  INFO 7549 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:42:50.040  INFO 7549 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:42:50.084  INFO 7549 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3647ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:42:50.125  INFO 7549 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:42:50.160  INFO 7549 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@7fc7c4a{/,null,AVAILABLE}
2023-12-14 17:42:50.167  INFO 7549 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@4d6ee47{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:42:50.167  INFO 7549 --- [           main] org.eclipse.jetty.server.Server          : Started @3731ms
2023-12-14 17:42:50.175  INFO 7549 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:42:50.175  INFO 7549 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:42:50.175  INFO 7549 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 328ms (build:45ms init:149ms start:134ms)
2023-12-14 17:42:50.179  INFO 7549 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.353 seconds (JVM running for 3.742)
Execution successful.

2023-12-14 17:43:23.511  INFO 7494 --- [qtp1776312161-32] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@7862dcd7, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:43:23.514  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:43:23.514  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:43:23.521  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:43:23.527  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7549}
2023-12-14 17:43:23.527  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7549: command not found
2023-12-14 17:43:23.529  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7549}
2023-12-14 17:43:33.532  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:43:34.294  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:43:34.295  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:43:34.295  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:43:34.295  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:43:34.295  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:43:34.295  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:43:34.295  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:43:34.295  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:43:34.295  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:43:34.393  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:34.389  INFO 7610 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7610 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:43:34.393  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:34.391  INFO 7610 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:43:35.603  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:35.601  INFO 7610 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:43:35.621  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:35.617  INFO 7610 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:43:35.621  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:35.618  INFO 7610 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:43:35.681  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:35.674  INFO 7610 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:43:35.681  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:35.674  INFO 7610 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1223 ms
2023-12-14 17:43:36.656  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:36.647  INFO 7610 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:43:36.722  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:36.707  INFO 7610 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:43:36.722  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:36.708  INFO 7610 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:43:36.981  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:36.978  INFO 7610 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:43:37.004  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.003  INFO 7610 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3464ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:43:37.042  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.042  INFO 7610 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:43:37.068  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.063  INFO 7610 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 17:43:37.079  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.071  INFO 7610 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:43:37.079  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.071  INFO 7610 --- [           main] org.eclipse.jetty.server.Server          : Started @3532ms
2023-12-14 17:43:37.079  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.079  INFO 7610 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:43:37.079  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.079  INFO 7610 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:43:37.079  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.079  INFO 7610 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 306ms (build:44ms init:161ms start:101ms)
2023-12-14 17:43:37.091  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:43:37.084  INFO 7610 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.167 seconds (JVM running for 3.545)
2023-12-14 17:43:43.540  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:43:43.544  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:43:43.549  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:43:43.550  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:43:43.550  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:43:48.556  INFO 7494 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7549}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7549: command not found
kill: {7549}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:43:34.389  INFO 7610 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7610 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:43:34.391  INFO 7610 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:43:35.601  INFO 7610 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:43:35.617  INFO 7610 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:43:35.618  INFO 7610 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:43:35.674  INFO 7610 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:43:35.674  INFO 7610 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1223 ms
2023-12-14 17:43:36.647  INFO 7610 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:43:36.707  INFO 7610 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:43:36.708  INFO 7610 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:43:36.978  INFO 7610 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:43:37.003  INFO 7610 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3464ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:43:37.042  INFO 7610 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:43:37.063  INFO 7610 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 17:43:37.071  INFO 7610 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:43:37.071  INFO 7610 --- [           main] org.eclipse.jetty.server.Server          : Started @3532ms
2023-12-14 17:43:37.079  INFO 7610 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:43:37.079  INFO 7610 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:43:37.079  INFO 7610 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 306ms (build:44ms init:161ms start:101ms)
2023-12-14 17:43:37.084  INFO 7610 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.167 seconds (JVM running for 3.545)
Execution successful.

2023-12-14 17:44:11.780  INFO 7494 --- [qtp1776312161-38] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@338e47b1, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:44:11.783  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:44:11.784  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:44:11.786  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:44:11.797  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7610}
2023-12-14 17:44:11.798  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7610: command not found
2023-12-14 17:44:11.799  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7610}
2023-12-14 17:44:21.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:44:22.577  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:44:22.648  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:22.645  INFO 7665 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7665 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:44:22.648  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:22.647  INFO 7665 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:44:23.878  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:23.874  INFO 7665 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:44:23.889  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:23.882  INFO 7665 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:44:23.889  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:23.882  INFO 7665 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:44:23.933  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:23.926  INFO 7665 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:44:23.933  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:23.926  INFO 7665 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1215 ms
2023-12-14 17:44:24.876  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:24.875  INFO 7665 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:44:24.937  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:24.928  INFO 7665 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:44:24.937  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:24.929  INFO 7665 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:44:25.195  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.185  INFO 7665 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:44:25.208  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.207  INFO 7665 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3396ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:44:25.253  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.244  INFO 7665 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:44:25.272  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.269  INFO 7665 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b00ad9{/,null,AVAILABLE}
2023-12-14 17:44:25.278  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.275  INFO 7665 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@8b91134{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:44:25.278  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.275  INFO 7665 --- [           main] org.eclipse.jetty.server.Server          : Started @3464ms
2023-12-14 17:44:25.289  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.281  INFO 7665 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:44:25.289  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.281  INFO 7665 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:44:25.289  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.281  INFO 7665 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 279ms (build:44ms init:139ms start:96ms)
2023-12-14 17:44:25.289  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:44:25.285  INFO 7665 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.093 seconds (JVM running for 3.474)
2023-12-14 17:44:31.808  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:44:31.809  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:44:31.810  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:44:31.811  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:44:31.811  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:44:36.818  INFO 7494 --- [Camel (camel-1) thread #3 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7610}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7610: command not found
kill: {7610}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:44:22.645  INFO 7665 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7665 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:44:22.647  INFO 7665 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:44:23.874  INFO 7665 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:44:23.882  INFO 7665 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:44:23.882  INFO 7665 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:44:23.926  INFO 7665 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:44:23.926  INFO 7665 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1215 ms
2023-12-14 17:44:24.875  INFO 7665 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:44:24.928  INFO 7665 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:44:24.929  INFO 7665 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:44:25.185  INFO 7665 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:44:25.207  INFO 7665 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3396ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:44:25.244  INFO 7665 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:44:25.269  INFO 7665 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b00ad9{/,null,AVAILABLE}
2023-12-14 17:44:25.275  INFO 7665 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@8b91134{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:44:25.275  INFO 7665 --- [           main] org.eclipse.jetty.server.Server          : Started @3464ms
2023-12-14 17:44:25.281  INFO 7665 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:44:25.281  INFO 7665 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:44:25.281  INFO 7665 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 279ms (build:44ms init:139ms start:96ms)
2023-12-14 17:44:25.285  INFO 7665 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.093 seconds (JVM running for 3.474)
Execution successful.

2023-12-14 17:45:30.028  INFO 7494 --- [qtp1776312161-38] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@134f8071, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:45:30.030  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:45:30.031  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:45:30.033  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:45:30.044  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7665}
2023-12-14 17:45:30.044  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7665: command not found
2023-12-14 17:45:30.047  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7665}
2023-12-14 17:45:40.048  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:45:40.827  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:45:40.828  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:45:40.828  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:45:40.828  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:45:40.828  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:45:40.828  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:45:40.828  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:45:40.828  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:45:40.828  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:45:40.944  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:40.939  INFO 7720 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7720 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:45:40.944  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:40.940  INFO 7720 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:45:42.229  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:42.227  INFO 7720 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:45:42.240  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:42.235  INFO 7720 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:45:42.240  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:42.235  INFO 7720 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:45:42.283  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:42.283  INFO 7720 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:45:42.283  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:42.283  INFO 7720 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1312 ms
2023-12-14 17:45:43.324  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.317  INFO 7720 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:45:43.366  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.360  INFO 7720 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:45:43.367  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.362  INFO 7720 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:45:43.624  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.619  INFO 7720 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:45:43.647  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.642  INFO 7720 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3582ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:45:43.679  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.678  INFO 7720 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:45:43.708  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.704  INFO 7720 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b00ad9{/,null,AVAILABLE}
2023-12-14 17:45:43.713  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.711  INFO 7720 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@8b91134{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:45:43.713  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.711  INFO 7720 --- [           main] org.eclipse.jetty.server.Server          : Started @3651ms
2023-12-14 17:45:43.725  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.717  INFO 7720 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:45:43.725  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.717  INFO 7720 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:45:43.725  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.717  INFO 7720 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 298ms (build:46ms init:154ms start:98ms)
2023-12-14 17:45:43.725  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:45:43.721  INFO 7720 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.263 seconds (JVM running for 3.661)
2023-12-14 17:45:50.057  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:45:50.060  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:45:50.065  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:45:50.066  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:45:50.066  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:45:55.073  INFO 7494 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7665}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7665: command not found
kill: {7665}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:45:40.939  INFO 7720 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7720 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:45:40.940  INFO 7720 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:45:42.227  INFO 7720 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:45:42.235  INFO 7720 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:45:42.235  INFO 7720 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:45:42.283  INFO 7720 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:45:42.283  INFO 7720 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1312 ms
2023-12-14 17:45:43.317  INFO 7720 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:45:43.360  INFO 7720 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:45:43.362  INFO 7720 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:45:43.619  INFO 7720 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:45:43.642  INFO 7720 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3582ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:45:43.678  INFO 7720 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:45:43.704  INFO 7720 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b00ad9{/,null,AVAILABLE}
2023-12-14 17:45:43.711  INFO 7720 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@8b91134{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:45:43.711  INFO 7720 --- [           main] org.eclipse.jetty.server.Server          : Started @3651ms
2023-12-14 17:45:43.717  INFO 7720 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:45:43.717  INFO 7720 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:45:43.717  INFO 7720 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 298ms (build:46ms init:154ms start:98ms)
2023-12-14 17:45:43.721  INFO 7720 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.263 seconds (JVM running for 3.661)
Execution successful.

2023-12-14 17:46:09.498  INFO 7494 --- [qtp1776312161-32] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@134f8071, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:46:09.500  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:46:09.500  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:46:09.502  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:46:09.514  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7720}
2023-12-14 17:46:09.514  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7720: command not found
2023-12-14 17:46:09.516  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7720}
2023-12-14 17:46:19.517  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:46:20.237  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:46:20.366  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:20.364  INFO 7777 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7777 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:46:20.367  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:20.365  INFO 7777 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:46:21.602  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:21.598  INFO 7777 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:46:21.613  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:21.607  INFO 7777 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:46:21.613  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:21.607  INFO 7777 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:46:21.662  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:21.653  INFO 7777 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:46:21.662  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:21.653  INFO 7777 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1239 ms
2023-12-14 17:46:22.570  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.567  INFO 7777 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:46:22.634  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.623  INFO 7777 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:46:22.634  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.624  INFO 7777 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:46:22.921  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.911  INFO 7777 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:46:22.944  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.934  INFO 7777 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3410ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:46:22.976  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.973  INFO 7777 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:46:22.995  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.991  INFO 7777 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:46:23.002  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.999  INFO 7777 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:46:23.002  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:22.999  INFO 7777 --- [           main] org.eclipse.jetty.server.Server          : Started @3475ms
2023-12-14 17:46:23.012  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:23.004  INFO 7777 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:46:23.012  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:23.005  INFO 7777 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:46:23.012  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:23.005  INFO 7777 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 306ms (build:38ms init:175ms start:93ms)
2023-12-14 17:46:23.012  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:46:23.008  INFO 7777 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.118 seconds (JVM running for 3.484)
2023-12-14 17:46:29.524  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:46:29.528  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:46:29.531  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:46:29.531  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:46:29.532  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:46:34.540  INFO 7494 --- [Camel (camel-1) thread #5 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7720}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7720: command not found
kill: {7720}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:46:20.364  INFO 7777 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7777 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:46:20.365  INFO 7777 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:46:21.598  INFO 7777 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:46:21.607  INFO 7777 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:46:21.607  INFO 7777 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:46:21.653  INFO 7777 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:46:21.653  INFO 7777 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1239 ms
2023-12-14 17:46:22.567  INFO 7777 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:46:22.623  INFO 7777 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:46:22.624  INFO 7777 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:46:22.911  INFO 7777 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:46:22.934  INFO 7777 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3410ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:46:22.973  INFO 7777 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:46:22.991  INFO 7777 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:46:22.999  INFO 7777 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:46:22.999  INFO 7777 --- [           main] org.eclipse.jetty.server.Server          : Started @3475ms
2023-12-14 17:46:23.004  INFO 7777 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:46:23.005  INFO 7777 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:46:23.005  INFO 7777 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 306ms (build:38ms init:175ms start:93ms)
2023-12-14 17:46:23.008  INFO 7777 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.118 seconds (JVM running for 3.484)
Execution successful.

2023-12-14 17:46:50.006  INFO 7494 --- [qtp1776312161-38] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@134f8071, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:46:50.009  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:46:50.009  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:46:50.012  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:46:50.023  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7777}
2023-12-14 17:46:50.024  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7777: command not found
2023-12-14 17:46:50.024  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7777}
2023-12-14 17:47:00.034  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:47:00.804  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:47:00.850  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:00.849  INFO 7832 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7832 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:47:00.853  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:00.853  INFO 7832 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:47:02.164  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:02.159  INFO 7832 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:47:02.175  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:02.169  INFO 7832 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:47:02.175  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:02.169  INFO 7832 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:47:02.234  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:02.231  INFO 7832 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:47:02.234  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:02.231  INFO 7832 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1331 ms
2023-12-14 17:47:03.131  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.117  INFO 7832 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:47:03.178  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.173  INFO 7832 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:47:03.178  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.174  INFO 7832 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:47:03.419  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.409  INFO 7832 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:47:03.446  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.436  INFO 7832 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3392ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:47:03.497  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.495  INFO 7832 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:47:03.530  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.526  INFO 7832 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@4e73b552{/,null,AVAILABLE}
2023-12-14 17:47:03.534  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.532  INFO 7832 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@1976f537{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:47:03.534  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.532  INFO 7832 --- [           main] org.eclipse.jetty.server.Server          : Started @3488ms
2023-12-14 17:47:03.548  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.538  INFO 7832 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:47:03.548  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.538  INFO 7832 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:47:03.548  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.538  INFO 7832 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 298ms (build:37ms init:133ms start:128ms)
2023-12-14 17:47:03.548  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:03.541  INFO 7832 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.142 seconds (JVM running for 3.497)
2023-12-14 17:47:10.043  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:47:10.046  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:47:10.050  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:47:10.050  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:47:10.050  INFO 7494 --- [qtp1776312161-38] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:47:15.059  INFO 7494 --- [Camel (camel-1) thread #3 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7777}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7777: command not found
kill: {7777}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:47:00.849  INFO 7832 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7832 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:47:00.853  INFO 7832 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:47:02.159  INFO 7832 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:47:02.169  INFO 7832 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:47:02.169  INFO 7832 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:47:02.231  INFO 7832 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:47:02.231  INFO 7832 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1331 ms
2023-12-14 17:47:03.117  INFO 7832 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:47:03.173  INFO 7832 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:47:03.174  INFO 7832 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:47:03.409  INFO 7832 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:47:03.436  INFO 7832 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3392ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:47:03.495  INFO 7832 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:47:03.526  INFO 7832 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@4e73b552{/,null,AVAILABLE}
2023-12-14 17:47:03.532  INFO 7832 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@1976f537{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:47:03.532  INFO 7832 --- [           main] org.eclipse.jetty.server.Server          : Started @3488ms
2023-12-14 17:47:03.538  INFO 7832 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:47:03.538  INFO 7832 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:47:03.538  INFO 7832 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 298ms (build:37ms init:133ms start:128ms)
2023-12-14 17:47:03.541  INFO 7832 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.142 seconds (JVM running for 3.497)
Execution successful.

2023-12-14 17:47:34.181  INFO 7494 --- [qtp1776312161-32] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@134f8071, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:47:34.183  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:47:34.183  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:47:34.185  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:47:34.191  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7832}
2023-12-14 17:47:34.192  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7832: command not found
2023-12-14 17:47:34.192  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7832}
2023-12-14 17:47:44.194  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:47:44.926  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:47:44.999  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:44.989  INFO 7888 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7888 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:47:44.999  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:44.991  INFO 7888 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:47:46.253  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:46.248  INFO 7888 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:47:46.264  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:46.259  INFO 7888 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:47:46.264  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:46.259  INFO 7888 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:47:46.309  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:46.307  INFO 7888 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:47:46.309  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:46.308  INFO 7888 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1284 ms
2023-12-14 17:47:47.243  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.233  INFO 7888 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:47:47.293  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.284  INFO 7888 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:47:47.293  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.285  INFO 7888 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:47:47.577  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.577  INFO 7888 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:47:47.608  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.599  INFO 7888 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3400ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:47:47.638  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.637  INFO 7888 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:47:47.659  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.656  INFO 7888 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@624a24f6{/,null,AVAILABLE}
2023-12-14 17:47:47.669  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.663  INFO 7888 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@3bae64d0{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:47:47.669  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.663  INFO 7888 --- [           main] org.eclipse.jetty.server.Server          : Started @3464ms
2023-12-14 17:47:47.680  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.672  INFO 7888 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:47:47.680  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.672  INFO 7888 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:47:47.680  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.673  INFO 7888 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 310ms (build:55ms init:160ms start:95ms)
2023-12-14 17:47:47.680  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:47:47.676  INFO 7888 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.118 seconds (JVM running for 3.477)
2023-12-14 17:47:54.198  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:47:54.202  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:47:54.205  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:47:54.205  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:47:54.205  INFO 7494 --- [qtp1776312161-32] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:47:59.215  INFO 7494 --- [Camel (camel-1) thread #4 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7832}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7832: command not found
kill: {7832}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:47:44.989  INFO 7888 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7888 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:47:44.991  INFO 7888 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:47:46.248  INFO 7888 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:47:46.259  INFO 7888 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:47:46.259  INFO 7888 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:47:46.307  INFO 7888 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:47:46.308  INFO 7888 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1284 ms
2023-12-14 17:47:47.233  INFO 7888 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:47:47.284  INFO 7888 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:47:47.285  INFO 7888 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:47:47.577  INFO 7888 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:47:47.599  INFO 7888 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3400ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:47:47.637  INFO 7888 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:47:47.656  INFO 7888 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@624a24f6{/,null,AVAILABLE}
2023-12-14 17:47:47.663  INFO 7888 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@3bae64d0{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:47:47.663  INFO 7888 --- [           main] org.eclipse.jetty.server.Server          : Started @3464ms
2023-12-14 17:47:47.672  INFO 7888 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:47:47.672  INFO 7888 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:47:47.673  INFO 7888 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 310ms (build:55ms init:160ms start:95ms)
2023-12-14 17:47:47.676  INFO 7888 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.118 seconds (JVM running for 3.477)
Execution successful.

2023-12-14 17:49:11.087  INFO 7494 --- [qtp1776312161-34] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@79e9984, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:49:11.089  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:49:11.089  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:49:11.092  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:49:11.103  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7888}
2023-12-14 17:49:11.104  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7888: command not found
2023-12-14 17:49:11.104  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7888}
2023-12-14 17:49:21.107  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:49:21.869  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:49:21.996  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:21.992  INFO 7945 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 7945 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:49:21.996  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:21.994  INFO 7945 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:49:23.092  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:23.085  INFO 7945 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:49:23.100  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:23.093  INFO 7945 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:49:23.100  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:23.093  INFO 7945 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:49:23.154  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:23.150  INFO 7945 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:49:23.154  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:23.150  INFO 7945 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1089 ms
2023-12-14 17:49:24.125  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.116  INFO 7945 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:49:24.175  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.170  INFO 7945 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:49:24.175  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.171  INFO 7945 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:49:24.424  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.418  INFO 7945 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:49:24.448  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.441  INFO 7945 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3325ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:49:24.481  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.479  INFO 7945 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:49:24.505  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.503  INFO 7945 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 17:49:24.512  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.509  INFO 7945 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:49:24.512  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.509  INFO 7945 --- [           main] org.eclipse.jetty.server.Server          : Started @3394ms
2023-12-14 17:49:24.524  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.515  INFO 7945 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:49:24.524  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.515  INFO 7945 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:49:24.524  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.515  INFO 7945 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 278ms (build:50ms init:132ms start:96ms)
2023-12-14 17:49:24.524  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:49:24.518  INFO 7945 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.051 seconds (JVM running for 3.403)
2023-12-14 17:49:31.113  INFO 7494 --- [qtp1776312161-34] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:51:46.727  INFO 7494 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is shutting down (timeout:45s)
2023-12-14 17:51:46.733  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:47.736  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 44 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:48.740  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 43 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:49.742  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 42 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:50.746  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 41 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:51.749  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 40 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:52.751  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 39 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:53.753  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 38 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:54.756  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 37 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:55.757  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 36 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:56.759  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 35 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:57.762  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 34 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:58.765  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 33 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:51:59.775  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 32 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:00.788  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 31 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:01.791  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 30 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:02.794  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 29 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:03.797  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 28 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:04.799  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 27 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:05.801  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 26 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:06.803  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 25 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:07.805  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 24 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:08.807  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 23 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:09.809  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 22 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:10.812  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 21 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:11.813  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 20 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:12.815  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 19 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:13.817  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 18 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:14.818  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 17 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:15.821  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 16 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:16.824  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 15 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:17.827  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 14 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:18.828  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 13 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:19.830  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 12 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:20.833  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 11 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:21.835  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 10 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:22.838  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 9 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:23.840  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 8 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:24.843  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 7 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:25.845  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 6 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:26.848  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 5 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:27.851  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 4 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:28.854  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 3 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:29.857  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 2 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:30.858  INFO 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 1 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:52:31.732  WARN 7494 --- [SpringApplicationShutdownHook] o.a.c.i.engine.DefaultShutdownStrategy   : Timeout occurred during graceful shutdown. Forcing the routes to be shutdown now. Notice: some resources may still be running as graceful shutdown did not complete successfully.
2023-12-14 17:52:31.732  WARN 7494 --- [Camel (camel-1) thread #8 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Interrupted while waiting during graceful shutdown, will force shutdown now.
2023-12-14 17:52:31.743  INFO 7494 --- [SpringApplicationShutdownHook] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:52:31.745  INFO 7494 --- [SpringApplicationShutdownHook] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@221dad51{/,null,STOPPED}
2023-12-14 17:53:01.748  WARN 7494 --- [SpringApplicationShutdownHook] o.e.jetty.util.thread.QueuedThreadPool   : QueuedThreadPool[qtp1776312161]@69e05f61{STOPPING,8<=0<=200,i=6,r=-1,q=0}[NO_TRY] Couldn't stop Thread[qtp1776312161-34,5,main]
2023-12-14 17:53:01.782  INFO 7494 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (total:1 stopped:1 forced:1)
2023-12-14 17:53:01.782  INFO 7494 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   :     Forced stopped dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:53:01.787  WARN 7494 --- [SpringApplicationShutdownHook] o.a.c.i.e.DefaultInflightRepository      : Shutting down while there are still 1 inflight exchanges.
2023-12-14 17:53:01.789  INFO 7494 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) shutdown in 1m15s62ms (uptime:10m34s)
2023-12-14 17:53:01.796  INFO 7494 --- [SpringApplicationShutdownHook] o.a.c.c.s.CamelHttpTransportServlet      : Destroyed CamelHttpTransportServlet[CamelServlet]
2023-12-14 17:53:23.184  INFO 8061 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8061 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 17:53:23.196  INFO 8061 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 17:53:24.532  INFO 8061 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 17:53:24.542  INFO 8061 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:53:24.542  INFO 8061 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:53:24.598  INFO 8061 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:53:24.598  INFO 8061 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1329 ms
2023-12-14 17:53:25.619  INFO 8061 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:53:25.673  INFO 8061 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:53:25.674  INFO 8061 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 17:53:25.926  INFO 8061 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:53:25.973  INFO 8061 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3682ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:53:26.013  INFO 8061 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:53:26.035  INFO 8061 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@2416498e{/,null,AVAILABLE}
2023-12-14 17:53:26.041  INFO 8061 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@47b179d7{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:53:26.042  INFO 8061 --- [main] org.eclipse.jetty.server.Server          : Started @3751ms
2023-12-14 17:53:26.047  INFO 8061 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:53:26.047  INFO 8061 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:53:26.047  INFO 8061 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 312ms (build:45ms init:147ms start:120ms)
2023-12-14 17:53:26.050  INFO 8061 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.342 seconds (JVM running for 3.759)
2023-12-14 17:53:33.576  INFO 8061 --- [qtp1920321355-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@30da6932, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:53:33.604  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:53:33.605  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:53:33.613  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:53:33.624  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {7945}
2023-12-14 17:53:33.625  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7945: command not found
2023-12-14 17:53:33.625  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {7945}
2023-12-14 17:53:43.628  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:53:44.452  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:53:44.539  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:44.529  INFO 8116 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8116 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:53:44.539  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:44.531  INFO 8116 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:53:45.836  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:45.833  INFO 8116 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:53:45.847  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:45.842  INFO 8116 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:53:45.848  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:45.842  INFO 8116 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:53:45.903  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:45.895  INFO 8116 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:53:45.903  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:45.895  INFO 8116 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1304 ms
2023-12-14 17:53:46.881  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:46.875  INFO 8116 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:53:46.926  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:46.924  INFO 8116 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:53:46.926  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:46.925  INFO 8116 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:53:47.219  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.208  INFO 8116 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:53:47.238  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.237  INFO 8116 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3600ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:53:47.280  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.276  INFO 8116 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:53:47.302  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.295  INFO 8116 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@4e73b552{/,null,AVAILABLE}
2023-12-14 17:53:47.302  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.302  INFO 8116 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@1976f537{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:53:47.302  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.302  INFO 8116 --- [           main] org.eclipse.jetty.server.Server          : Started @3666ms
2023-12-14 17:53:47.313  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.310  INFO 8116 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:53:47.313  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.310  INFO 8116 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:53:47.313  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.310  INFO 8116 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 316ms (build:36ms init:182ms start:98ms)
2023-12-14 17:53:47.314  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:53:47.313  INFO 8116 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.256 seconds (JVM running for 3.677)
2023-12-14 17:53:53.640  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:53:53.644  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:53:53.698  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:53:53.698  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:53:53.698  INFO 8061 --- [qtp1920321355-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:53:58.731  INFO 8061 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {7945}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 7945: command not found
kill: {7945}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:53:44.529  INFO 8116 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8116 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:53:44.531  INFO 8116 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:53:45.833  INFO 8116 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:53:45.842  INFO 8116 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:53:45.842  INFO 8116 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:53:45.895  INFO 8116 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:53:45.895  INFO 8116 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1304 ms
2023-12-14 17:53:46.875  INFO 8116 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:53:46.924  INFO 8116 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:53:46.925  INFO 8116 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:53:47.208  INFO 8116 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:53:47.237  INFO 8116 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3600ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:53:47.276  INFO 8116 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:53:47.295  INFO 8116 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@4e73b552{/,null,AVAILABLE}
2023-12-14 17:53:47.302  INFO 8116 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@1976f537{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:53:47.302  INFO 8116 --- [           main] org.eclipse.jetty.server.Server          : Started @3666ms
2023-12-14 17:53:47.310  INFO 8116 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:53:47.310  INFO 8116 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:53:47.310  INFO 8116 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 316ms (build:36ms init:182ms start:98ms)
2023-12-14 17:53:47.313  INFO 8116 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.256 seconds (JVM running for 3.677)
Execution successful.

2023-12-14 17:54:12.509  INFO 8061 --- [qtp1920321355-32] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@30da6932, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:54:12.512  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:54:12.512  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:54:12.514  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:54:12.527  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {8116}
2023-12-14 17:54:12.528  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8116: command not found
2023-12-14 17:54:12.530  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : kill: {8116}
2023-12-14 17:54:22.533  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:54:23.323  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:54:23.381  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:23.371  INFO 8172 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8172 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:54:23.381  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:23.372  INFO 8172 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:54:24.617  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:24.612  INFO 8172 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:54:24.627  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:24.620  INFO 8172 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:54:24.627  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:24.620  INFO 8172 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:54:24.670  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:24.664  INFO 8172 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:54:24.670  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:24.664  INFO 8172 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1243 ms
2023-12-14 17:54:25.608  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:25.595  INFO 8172 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:54:25.684  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:25.673  INFO 8172 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:54:25.684  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:25.674  INFO 8172 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:54:25.943  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:25.932  INFO 8172 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:54:25.982  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:25.973  INFO 8172 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3430ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:54:26.014  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:26.013  INFO 8172 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:54:26.045  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:26.042  INFO 8172 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:54:26.056  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:26.049  INFO 8172 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:54:26.056  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:26.050  INFO 8172 --- [           main] org.eclipse.jetty.server.Server          : Started @3507ms
2023-12-14 17:54:26.056  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:26.056  INFO 8172 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:54:26.056  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:26.056  INFO 8172 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:54:26.056  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:26.056  INFO 8172 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 302ms (build:37ms init:142ms start:123ms)
2023-12-14 17:54:26.067  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:54:26.059  INFO 8172 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.148 seconds (JVM running for 3.516)
2023-12-14 17:54:32.539  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:54:32.541  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:54:32.544  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:54:32.545  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:54:32.546  INFO 8061 --- [qtp1920321355-32] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:54:37.551  INFO 8061 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {8116}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8116: command not found
kill: {8116}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:54:23.371  INFO 8172 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8172 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:54:23.372  INFO 8172 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:54:24.612  INFO 8172 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:54:24.620  INFO 8172 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:54:24.620  INFO 8172 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:54:24.664  INFO 8172 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:54:24.664  INFO 8172 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1243 ms
2023-12-14 17:54:25.595  INFO 8172 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:54:25.673  INFO 8172 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:54:25.674  INFO 8172 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:54:25.932  INFO 8172 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:54:25.973  INFO 8172 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3430ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:54:26.013  INFO 8172 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:54:26.042  INFO 8172 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:54:26.049  INFO 8172 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:54:26.050  INFO 8172 --- [           main] org.eclipse.jetty.server.Server          : Started @3507ms
2023-12-14 17:54:26.056  INFO 8172 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:54:26.056  INFO 8172 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:54:26.056  INFO 8172 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 302ms (build:37ms init:142ms start:123ms)
2023-12-14 17:54:26.059  INFO 8172 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.148 seconds (JVM running for 3.516)
Execution successful.

2023-12-14 17:55:13.526  INFO 8061 --- [qtp1920321355-35] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@5e77808d, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:55:13.529  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:55:13.529  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:55:13.531  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:55:13.543  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {8172}
2023-12-14 17:55:13.543  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8172: command not found
2023-12-14 17:55:13.544  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : kill: {8172}
2023-12-14 17:55:23.548  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:55:24.343  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:55:24.343  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:55:24.343  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:55:24.343  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:55:24.343  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:55:24.344  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:55:24.344  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:55:24.344  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:55:24.344  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:55:24.424  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:24.417  INFO 8227 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8227 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:55:24.424  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:24.419  INFO 8227 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:55:25.802  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:25.799  INFO 8227 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:55:25.814  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:25.809  INFO 8227 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:55:25.814  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:25.809  INFO 8227 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:55:25.867  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:25.858  INFO 8227 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:55:25.868  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:25.858  INFO 8227 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1384 ms
2023-12-14 17:55:26.852  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:26.845  INFO 8227 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:55:26.915  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:26.905  INFO 8227 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:55:26.916  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:26.906  INFO 8227 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:55:27.168  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.168  INFO 8227 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:55:27.219  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.210  INFO 8227 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3653ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:55:27.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.251  INFO 8227 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:55:27.285  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.285  INFO 8227 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:55:27.294  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.291  INFO 8227 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:55:27.294  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.292  INFO 8227 --- [           main] org.eclipse.jetty.server.Server          : Started @3735ms
2023-12-14 17:55:27.307  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.298  INFO 8227 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:55:27.307  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.298  INFO 8227 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:55:27.307  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.298  INFO 8227 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 314ms (build:37ms init:148ms start:129ms)
2023-12-14 17:55:27.307  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:55:27.302  INFO 8227 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.382 seconds (JVM running for 3.745)
2023-12-14 17:55:33.553  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:55:33.557  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:55:33.561  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:55:33.561  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:55:33.561  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:55:38.566  INFO 8061 --- [Camel (camel-1) thread #2 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {8172}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8172: command not found
kill: {8172}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:55:24.417  INFO 8227 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8227 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:55:24.419  INFO 8227 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:55:25.799  INFO 8227 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:55:25.809  INFO 8227 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:55:25.809  INFO 8227 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:55:25.858  INFO 8227 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:55:25.858  INFO 8227 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1384 ms
2023-12-14 17:55:26.845  INFO 8227 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:55:26.905  INFO 8227 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:55:26.906  INFO 8227 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:55:27.168  INFO 8227 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:55:27.210  INFO 8227 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3653ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:55:27.251  INFO 8227 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:55:27.285  INFO 8227 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:55:27.291  INFO 8227 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:55:27.292  INFO 8227 --- [           main] org.eclipse.jetty.server.Server          : Started @3735ms
2023-12-14 17:55:27.298  INFO 8227 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:55:27.298  INFO 8227 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:55:27.298  INFO 8227 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 314ms (build:37ms init:148ms start:129ms)
2023-12-14 17:55:27.302  INFO 8227 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.382 seconds (JVM running for 3.745)
Execution successful.

2023-12-14 17:56:01.163  INFO 8061 --- [qtp1920321355-39] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@5e77808d, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:56:01.165  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:56:01.166  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:56:01.168  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:56:01.178  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {8227}
2023-12-14 17:56:01.178  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8227: command not found
2023-12-14 17:56:01.179  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : kill: {8227}
2023-12-14 17:56:11.181  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:56:12.004  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:56:12.004  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:56:12.004  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:56:12.004  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:56:12.004  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:56:12.004  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:56:12.005  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:56:12.005  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:56:12.005  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:56:12.083  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:12.081  INFO 8282 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8282 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:56:12.084  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:12.082  INFO 8282 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:56:13.375  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:13.370  INFO 8282 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:56:13.386  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:13.382  INFO 8282 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:56:13.386  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:13.382  INFO 8282 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:56:13.442  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:13.437  INFO 8282 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:56:13.442  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:13.437  INFO 8282 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1291 ms
2023-12-14 17:56:14.379  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.377  INFO 8282 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:56:14.428  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.418  INFO 8282 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:56:14.429  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.419  INFO 8282 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:56:14.716  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.711  INFO 8282 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:56:14.746  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.736  INFO 8282 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3548ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:56:14.778  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.775  INFO 8282 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:56:14.803  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.801  INFO 8282 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:56:14.811  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.808  INFO 8282 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:56:14.812  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.809  INFO 8282 --- [           main] org.eclipse.jetty.server.Server          : Started @3622ms
2023-12-14 17:56:14.820  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.815  INFO 8282 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:56:14.820  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.816  INFO 8282 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:56:14.820  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.816  INFO 8282 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 317ms (build:40ms init:174ms start:103ms)
2023-12-14 17:56:14.820  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:14.819  INFO 8282 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.21 seconds (JVM running for 3.632)
2023-12-14 17:56:21.185  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:56:21.189  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 17:56:21.192  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 17:56:21.193  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 17:56:21.193  INFO 8061 --- [qtp1920321355-39] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 17:56:26.198  INFO 8061 --- [Camel (camel-1) thread #4 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {8227}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8227: command not found
kill: {8227}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:56:12.081  INFO 8282 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8282 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:56:12.082  INFO 8282 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:56:13.370  INFO 8282 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:56:13.382  INFO 8282 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:56:13.382  INFO 8282 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:56:13.437  INFO 8282 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:56:13.437  INFO 8282 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1291 ms
2023-12-14 17:56:14.377  INFO 8282 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:56:14.418  INFO 8282 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:56:14.419  INFO 8282 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:56:14.711  INFO 8282 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:56:14.736  INFO 8282 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3548ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:56:14.775  INFO 8282 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:56:14.801  INFO 8282 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@221dad51{/,null,AVAILABLE}
2023-12-14 17:56:14.808  INFO 8282 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@45f421c{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:56:14.809  INFO 8282 --- [           main] org.eclipse.jetty.server.Server          : Started @3622ms
2023-12-14 17:56:14.815  INFO 8282 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:56:14.816  INFO 8282 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:56:14.816  INFO 8282 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 317ms (build:40ms init:174ms start:103ms)
2023-12-14 17:56:14.819  INFO 8282 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.21 seconds (JVM running for 3.632)
Execution successful.

2023-12-14 17:56:35.519  INFO 8061 --- [qtp1920321355-35] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@5e77808d, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:56:35.522  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:56:35.522  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:56:35.524  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:56:35.534  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {8282}
2023-12-14 17:56:35.535  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8282: command not found
2023-12-14 17:56:35.535  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : kill: {8282}
2023-12-14 17:56:45.538  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:56:46.252  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:56:46.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:56:46.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:56:46.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:56:46.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:56:46.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:56:46.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:56:46.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:56:46.253  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:56:46.331  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:46.325  INFO 8337 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8337 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:56:46.331  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:46.327  INFO 8337 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:56:47.539  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:47.529  INFO 8337 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:56:47.539  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:47.537  INFO 8337 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:56:47.539  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:47.538  INFO 8337 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:56:47.583  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:47.583  INFO 8337 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:56:47.583  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:47.583  INFO 8337 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1196 ms
2023-12-14 17:56:48.590  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.578  INFO 8337 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:56:48.640  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.631  INFO 8337 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:56:48.640  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.632  INFO 8337 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 17:56:48.885  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.878  INFO 8337 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:56:48.910  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.901  INFO 8337 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3355ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:56:48.940  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.937  INFO 8337 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:56:48.963  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.960  INFO 8337 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@4e73b552{/,null,AVAILABLE}
2023-12-14 17:56:48.969  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.966  INFO 8337 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@1976f537{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 17:56:48.969  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.966  INFO 8337 --- [           main] org.eclipse.jetty.server.Server          : Started @3420ms
2023-12-14 17:56:48.980  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.972  INFO 8337 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:56:48.980  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.972  INFO 8337 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 17:56:48.980  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.972  INFO 8337 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 281ms (build:44ms init:144ms start:93ms)
2023-12-14 17:56:48.980  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:56:48.975  INFO 8337 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.08 seconds (JVM running for 3.429)
2023-12-14 17:56:55.547  INFO 8061 --- [qtp1920321355-35] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 17:58:18.251  INFO 8061 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is shutting down (timeout:45s)
2023-12-14 17:58:18.267  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:19.271  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 44 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:20.275  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 43 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:21.278  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 42 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:22.282  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 41 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:23.286  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 40 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:24.289  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 39 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:25.294  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 38 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:26.297  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 37 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:27.299  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 36 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:28.304  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 35 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:29.307  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 34 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:30.310  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 33 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:31.313  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 32 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:32.318  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 31 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:33.322  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 30 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:34.325  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 29 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:35.327  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 28 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:36.331  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 27 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:37.335  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 26 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:38.338  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 25 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:39.340  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 24 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:40.343  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 23 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:41.347  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 22 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:42.351  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 21 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:43.354  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 20 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:44.360  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 19 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:45.364  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 18 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:46.367  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 17 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:47.371  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 16 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:48.373  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 15 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:49.375  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 14 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:50.377  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 13 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:51.379  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 12 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:52.382  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 11 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:53.385  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 10 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:54.388  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 9 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:55.392  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 8 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:56.395  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 7 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:57.399  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 6 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:58.402  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 5 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:58:59.405  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 4 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:59:00.410  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 3 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:59:01.412  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 2 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:59:02.415  INFO 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 1 seconds. Inflights per route: [dsp-deploy = 1]
2023-12-14 17:59:03.260  WARN 8061 --- [SpringApplicationShutdownHook] o.a.c.i.engine.DefaultShutdownStrategy   : Timeout occurred during graceful shutdown. Forcing the routes to be shutdown now. Notice: some resources may still be running as graceful shutdown did not complete successfully.
2023-12-14 17:59:03.260  WARN 8061 --- [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Interrupted while waiting during graceful shutdown, will force shutdown now.
2023-12-14 17:59:03.268  INFO 8061 --- [SpringApplicationShutdownHook] o.e.jetty.server.AbstractConnector       : Stopped ServerConnector@47b179d7{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:59:03.270  INFO 8061 --- [SpringApplicationShutdownHook] o.e.jetty.server.handler.ContextHandler  : Stopped o.e.j.s.ServletContextHandler@2416498e{/,null,STOPPED}
2023-12-14 17:59:33.274  WARN 8061 --- [SpringApplicationShutdownHook] o.e.jetty.util.thread.QueuedThreadPool   : QueuedThreadPool[qtp1920321355]@7275c74b{STOPPING,8<=0<=200,i=6,r=-1,q=0}[NO_TRY] Couldn't stop Thread[qtp1920321355-35,5,main]
2023-12-14 17:59:33.287  INFO 8061 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Routes stopped (total:1 stopped:1 forced:1)
2023-12-14 17:59:33.287  INFO 8061 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   :     Forced stopped dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:59:33.289  WARN 8061 --- [SpringApplicationShutdownHook] o.a.c.i.e.DefaultInflightRepository      : Shutting down while there are still 1 inflight exchanges.
2023-12-14 17:59:33.291  INFO 8061 --- [SpringApplicationShutdownHook] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) shutdown in 1m15s39ms (uptime:6m7s)
2023-12-14 17:59:33.301  INFO 8061 --- [SpringApplicationShutdownHook] o.a.c.c.s.CamelHttpTransportServlet      : Destroyed CamelHttpTransportServlet[CamelServlet]
2023-12-14 17:59:38.352  INFO 8431 --- [main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8431 (/home/dsp_deploy/agent-1.0.0.jar started by root in /home/dsp_deploy)
2023-12-14 17:59:38.354  INFO 8431 --- [main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "deploy"
2023-12-14 17:59:39.558  INFO 8431 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 7878 (http)
2023-12-14 17:59:39.567  INFO 8431 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:59:39.567  INFO 8431 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:59:39.621  INFO 8431 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:59:39.621  INFO 8431 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1187 ms
2023-12-14 17:59:40.595  INFO 8431 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 17:59:40.641  INFO 8431 --- [main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 17:59:40.643  INFO 8431 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 7878 (http) with context path ''
2023-12-14 17:59:40.883  INFO 8431 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 17:59:40.927  INFO 8431 --- [main] org.eclipse.jetty.util.log               : Logging initialized @3501ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 17:59:40.965  INFO 8431 --- [main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 17:59:40.983  INFO 8431 --- [main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@2cec704c{/,null,AVAILABLE}
2023-12-14 17:59:40.990  INFO 8431 --- [main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@1816e24a{HTTP/1.1, (http/1.1)}{172.30.1.84:6666}
2023-12-14 17:59:40.990  INFO 8431 --- [main] org.eclipse.jetty.server.Server          : Started @3565ms
2023-12-14 17:59:40.996  INFO 8431 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 17:59:40.997  INFO 8431 --- [main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-deploy (jetty:http://172.30.1.84:6666/file)
2023-12-14 17:59:40.997  INFO 8431 --- [main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 313ms (build:57ms init:143ms start:113ms)
2023-12-14 17:59:41.000  INFO 8431 --- [main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.195 seconds (JVM running for 3.575)
2023-12-14 17:59:47.067  INFO 8431 --- [qtp1235381529-36] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@7f23832d, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 17:59:47.083  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 17:59:47.084  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 17:59:47.095  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 17:59:47.112  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {8337}
2023-12-14 17:59:47.113  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8337: command not found
2023-12-14 17:59:47.113  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : kill: {8337}
2023-12-14 17:59:57.118  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 17:59:57.836  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:59:57.837  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 17:59:57.837  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 17:59:57.837  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 17:59:57.837  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 17:59:57.837  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 17:59:57.837  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 17:59:57.837  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 17:59:57.837  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 17:59:57.933  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:59:57.925  INFO 8486 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8486 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:59:57.934  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:59:57.926  INFO 8486 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:59:59.204  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:59:59.198  INFO 8486 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:59:59.213  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:59:59.206  INFO 8486 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:59:59.213  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:59:59.206  INFO 8486 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:59:59.255  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:59:59.250  INFO 8486 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:59:59.255  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 17:59:59.251  INFO 8486 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1211 ms
2023-12-14 18:00:00.192  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.185  INFO 8486 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 18:00:00.238  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.229  INFO 8486 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 18:00:00.238  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.231  INFO 8486 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 18:00:00.501  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.495  INFO 8486 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 18:00:00.518  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.517  INFO 8486 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3390ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 18:00:00.563  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.553  INFO 8486 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 18:00:00.586  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.578  INFO 8486 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 18:00:00.586  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.583  INFO 8486 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 18:00:00.586  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.583  INFO 8486 --- [           main] org.eclipse.jetty.server.Server          : Started @3456ms
2023-12-14 18:00:00.590  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.589  INFO 8486 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 18:00:00.590  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.589  INFO 8486 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 18:00:00.590  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.589  INFO 8486 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 285ms (build:36ms init:156ms start:93ms)
2023-12-14 18:00:00.594  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:00.593  INFO 8486 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.132 seconds (JVM running for 3.466)
2023-12-14 18:00:07.131  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 18:00:07.133  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 18:00:07.178  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 18:00:07.178  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 18:00:07.179  INFO 8431 --- [qtp1235381529-36] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 18:00:12.211  INFO 8431 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {8337}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8337: command not found
kill: {8337}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 17:59:57.925  INFO 8486 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8486 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 17:59:57.926  INFO 8486 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 17:59:59.198  INFO 8486 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 17:59:59.206  INFO 8486 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 17:59:59.206  INFO 8486 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 17:59:59.250  INFO 8486 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 17:59:59.251  INFO 8486 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1211 ms
2023-12-14 18:00:00.185  INFO 8486 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 18:00:00.229  INFO 8486 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 18:00:00.231  INFO 8486 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 18:00:00.495  INFO 8486 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 18:00:00.517  INFO 8486 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3390ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 18:00:00.553  INFO 8486 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 18:00:00.578  INFO 8486 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@6b0615ae{/,null,AVAILABLE}
2023-12-14 18:00:00.583  INFO 8486 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@736048ed{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 18:00:00.583  INFO 8486 --- [           main] org.eclipse.jetty.server.Server          : Started @3456ms
2023-12-14 18:00:00.589  INFO 8486 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 18:00:00.589  INFO 8486 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 18:00:00.589  INFO 8486 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 285ms (build:36ms init:156ms start:93ms)
2023-12-14 18:00:00.593  INFO 8486 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.132 seconds (JVM running for 3.466)
Execution successful.

2023-12-14 18:00:26.273  INFO 8431 --- [qtp1235381529-32] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@7f23832d, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 18:00:26.277  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 18:00:26.277  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 18:00:26.278  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 18:00:26.285  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {8486}
2023-12-14 18:00:26.285  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8486: command not found
2023-12-14 18:00:26.286  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : kill: {8486}
2023-12-14 18:00:36.292  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 18:00:37.085  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 18:00:37.166  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:37.158  INFO 8545 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8545 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 18:00:37.166  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:37.166  INFO 8545 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 18:00:38.346  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:38.340  INFO 8545 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 18:00:38.356  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:38.348  INFO 8545 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 18:00:38.356  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:38.349  INFO 8545 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 18:00:38.410  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:38.404  INFO 8545 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 18:00:38.410  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:38.405  INFO 8545 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1209 ms
2023-12-14 18:00:39.281  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.279  INFO 8545 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 18:00:39.331  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.322  INFO 8545 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 18:00:39.331  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.323  INFO 8545 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 18:00:39.604  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.601  INFO 8545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 18:00:39.647  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.646  INFO 8545 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3346ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 18:00:39.689  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.686  INFO 8545 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 18:00:39.709  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.707  INFO 8545 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 18:00:39.715  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.713  INFO 8545 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 18:00:39.716  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.713  INFO 8545 --- [           main] org.eclipse.jetty.server.Server          : Started @3414ms
2023-12-14 18:00:39.729  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.720  INFO 8545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 18:00:39.729  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.720  INFO 8545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 18:00:39.729  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.720  INFO 8545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 297ms (build:38ms init:141ms start:118ms)
2023-12-14 18:00:39.729  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:00:39.724  INFO 8545 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.043 seconds (JVM running for 3.425)
2023-12-14 18:00:46.299  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 18:00:58.576  INFO 8431 --- [qtp1235381529-35] deploy-template.yaml:14                  : {Accept-Encoding=gzip,deflate, agentName=deploy, CamelHttpMethod=POST, CamelHttpPath=, CamelHttpQuery=null, CamelHttpServletRequest=Request(POST //172.30.1.84:6666/file)@5b02541e, CamelHttpServletResponse=HTTP/1.1 200 

, CamelHttpUri=/file, CamelHttpUrl=http://172.30.1.84:6666/file, CamelServletContextPath=/file, Connection=keep-alive, Content-Length=509, fileExtension=sh, fileName=I0000001-S00001-1-deploy-start-1.0.0.sh, Host=172.30.1.84:6666, instName=I0000001, serverNum=1, serviceName=S00001, User-Agent=Apache-HttpClient/4.5.13 (Java/11.0.20), version=1.0.0}
2023-12-14 18:00:58.578  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy
2023-12-14 18:00:58.578  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 실행 스크립트: 
#!/bin/sh

cd /home/dsp_if

echo "PID Check..."

CURRENT_PID=$(ps -ef | grep java | grep if | awk '{print $2}')

echo "Running PID: {$CURRENT_PID}"

if "$CURRENT_PID" [ -z CURRENT_PID ] ; then
    echo "Project is not running"
else
    kill -9 $CURRENT_PID
    echo "kill: {$CURRENT_PID}"
    sleep 10
fi

echo "Deploy Project...."

nohup java -jar agent-1.0.0.jar --spring.profiles.active=if &

sleep 10

if [ $? -eq 0 ]; then
    echo "Execution successful."
else
    echo "Execution failed."
    exit 1
fi

2023-12-14 18:00:58.581  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : PID Check...
2023-12-14 18:00:58.593  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : Running PID: {8545}
2023-12-14 18:00:58.593  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : /home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8545: command not found
2023-12-14 18:00:58.595  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : kill: {8545}
2023-12-14 18:00:58.601  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 18:00:58.604  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 18:00:58.604  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 18:00:58.604  INFO 8431 --- [qtp1235381529-32] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 18:01:03.613  INFO 8431 --- [Camel (camel-1) thread #2 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {8486}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8486: command not found
kill: {8486}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 18:00:37.158  INFO 8545 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8545 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 18:00:37.166  INFO 8545 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 18:00:38.340  INFO 8545 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 18:00:38.348  INFO 8545 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 18:00:38.349  INFO 8545 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 18:00:38.404  INFO 8545 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 18:00:38.405  INFO 8545 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1209 ms
2023-12-14 18:00:39.279  INFO 8545 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 18:00:39.322  INFO 8545 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 18:00:39.323  INFO 8545 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 18:00:39.601  INFO 8545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 18:00:39.646  INFO 8545 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3346ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 18:00:39.686  INFO 8545 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 18:00:39.707  INFO 8545 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 18:00:39.713  INFO 8545 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 18:00:39.713  INFO 8545 --- [           main] org.eclipse.jetty.server.Server          : Started @3414ms
2023-12-14 18:00:39.720  INFO 8545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 18:00:39.720  INFO 8545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 18:00:39.720  INFO 8545 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 297ms (build:38ms init:141ms start:118ms)
2023-12-14 18:00:39.724  INFO 8545 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.043 seconds (JVM running for 3.425)
Execution successful.

2023-12-14 18:01:03.644 ERROR 8431 --- [qtp1235381529-39] o.a.c.c.jetty.CamelContinuationServlet   : Error processing request

org.eclipse.jetty.io.EofException: null
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:280) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.flush(WriteFlusher.java:422) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.WriteFlusher.completeWrite(WriteFlusher.java:378) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:119) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:338) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:300) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:173) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:409) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034) ~[jetty-util-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]
Caused by: java.io.IOException: 파이프가 깨어짐
	at java.base/sun.nio.ch.FileDispatcherImpl.writev0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.writev(SocketDispatcher.java:51) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:182) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:130) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:493) ~[na:na]
	at java.base/java.nio.channels.SocketChannel.write(SocketChannel.java:507) ~[na:na]
	at org.eclipse.jetty.io.ChannelEndPoint.flush(ChannelEndPoint.java:274) ~[jetty-io-9.4.50.v20221201.jar!/:9.4.50.v20221201]
	... 11 common frames omitted

2023-12-14 18:01:08.598  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : Deploy Project....
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  :   .   ____          _            __ _ _
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  :  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  :  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  :   '  |____| .__|_| |_|_| |_\__, | / / / /
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  :  =========|_|==============|___/=/_/_/_/
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  :  :: Spring Boot ::                (v2.7.7)
2023-12-14 18:01:09.339  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 
2023-12-14 18:01:09.401  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:09.396  INFO 8612 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8612 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 18:01:09.402  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:09.397  INFO 8612 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 18:01:10.729  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:10.721  INFO 8612 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 18:01:10.733  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:10.731  INFO 8612 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 18:01:10.733  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:10.731  INFO 8612 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 18:01:10.798  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:10.798  INFO 8612 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 18:01:10.798  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:10.798  INFO 8612 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1344 ms
2023-12-14 18:01:11.702  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:11.701  INFO 8612 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 18:01:11.765  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:11.755  INFO 8612 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 18:01:11.766  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:11.756  INFO 8612 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 18:01:12.030  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.030  INFO 8612 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 18:01:12.056  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.054  INFO 8612 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3446ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 18:01:12.094  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.092  INFO 8612 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 18:01:12.121  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.119  INFO 8612 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 18:01:12.128  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.125  INFO 8612 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 18:01:12.128  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.125  INFO 8612 --- [           main] org.eclipse.jetty.server.Server          : Started @3518ms
2023-12-14 18:01:12.138  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.131  INFO 8612 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 18:01:12.138  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.131  INFO 8612 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 18:01:12.138  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.131  INFO 8612 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 318ms (build:59ms init:159ms start:100ms)
2023-12-14 18:01:12.138  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 2023-12-14 18:01:12.134  INFO 8612 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.158 seconds (JVM running for 3.527)
2023-12-14 18:01:18.604  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : Execution successful.
2023-12-14 18:01:18.608  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 결과 넣음
2023-12-14 18:01:18.611  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 문자열로 바꿈
2023-12-14 18:01:18.611  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : 바디에 넣음
2023-12-14 18:01:18.612  INFO 8431 --- [qtp1235381529-35] go.kr.dsp.api.processor.ScriptProcessor  : Exited with code 0
2023-12-14 18:01:23.617  INFO 8431 --- [Camel (camel-1) thread #1 - Delay] g.kr.dsp.api.processor.LogFileProcessor  : 스크립트 결과:
PID Check...
Running PID: {8545}
/home/dsp_deploy/script/I0000001-S00001-1-deploy-start-1.0.0.sh: line 11: 8545: command not found
kill: {8545}
Deploy Project....

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.7)

2023-12-14 18:01:09.396  INFO 8612 --- [           main] go.kr.dsp.api.DspApiApplication          : Starting DspApiApplication using Java 11.0.21 on localhost.localdomain with PID 8612 (/home/dsp_if/agent-1.0.0.jar started by root in /home/dsp_if)
2023-12-14 18:01:09.397  INFO 8612 --- [           main] go.kr.dsp.api.DspApiApplication          : The following 1 profile is active: "if"
2023-12-14 18:01:10.721  INFO 8612 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8787 (http)
2023-12-14 18:01:10.731  INFO 8612 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-14 18:01:10.731  INFO 8612 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.70]
2023-12-14 18:01:10.798  INFO 8612 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-14 18:01:10.798  INFO 8612 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1344 ms
2023-12-14 18:01:11.701  INFO 8612 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2023-12-14 18:01:11.755  INFO 8612 --- [           main] o.a.c.c.s.CamelHttpTransportServlet      : Initialized CamelHttpTransportServlet[name=CamelServlet, contextPath=]
2023-12-14 18:01:11.756  INFO 8612 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8787 (http) with context path ''
2023-12-14 18:01:12.030  INFO 8612 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) is starting
2023-12-14 18:01:12.054  INFO 8612 --- [           main] org.eclipse.jetty.util.log               : Logging initialized @3446ms to org.eclipse.jetty.util.log.Slf4jLog
2023-12-14 18:01:12.092  INFO 8612 --- [           main] org.eclipse.jetty.server.Server          : jetty-9.4.50.v20221201; built: 2022-12-01T22:07:03.915Z; git: da9a0b30691a45daf90a9f17b5defa2f1434f882; jvm 11.0.21+9-LTS
2023-12-14 18:01:12.119  INFO 8612 --- [           main] o.e.jetty.server.handler.ContextHandler  : Started o.e.j.s.ServletContextHandler@49c8f6e8{/,null,AVAILABLE}
2023-12-14 18:01:12.125  INFO 8612 --- [           main] o.e.jetty.server.AbstractConnector       : Started ServerConnector@5d7835a8{HTTP/1.1, (http/1.1)}{172.30.1.84:7777}
2023-12-14 18:01:12.125  INFO 8612 --- [           main] org.eclipse.jetty.server.Server          : Started @3518ms
2023-12-14 18:01:12.131  INFO 8612 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:1)
2023-12-14 18:01:12.131  INFO 8612 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started dsp-if (jetty:http://172.30.1.84:7777/file)
2023-12-14 18:01:12.131  INFO 8612 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.0 (camel-1) started in 318ms (build:59ms init:159ms start:100ms)
2023-12-14 18:01:12.134  INFO 8612 --- [           main] go.kr.dsp.api.DspApiApplication          : Started DspApiApplication in 3.158 seconds (JVM running for 3.527)
Execution successful.

