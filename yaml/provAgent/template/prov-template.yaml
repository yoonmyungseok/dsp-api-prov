- route-template:
    id: prov-template
    from:
      uri: file://file?include=^.*\.(yaml|jar|sh)$&noop=true
      steps:
        - process:
            ref: fileExtProcessor
        - log: ${headers}
        - log: "확장자: ${header.fileExtension}"
        - log: "파일명: ${header.fileName}"
        - log: "서비스명: ${header.serviceName}"
        - log: "에이전트: ${header.agentName}"
        - choice:
            when:
              - simple: ${header.fileExtension} == "jar"
                steps:
                  - log: "jar 시간 지연 10초 시작"
                  - delay:
                      constant: 10000
                  - process:
                      ref: fileSendProcessor
                  - log: "jar 시간 지연 10초 끝"
              - simple: ${header.fileExtension} == "yaml" || ${header.fileExtension} == "sh"
                steps:
                  - log: "시간 지연 2초 시작"
                  - delay:
                      constant: 2000
                  - process:
                      ref: fileSendProcessor
                  - log: "시간 지연 2초 끝"
#              - simple: ${header.CamelFileParent} == "if"
#                steps:
#                  - to: http://172.30.1.84:6666/deploy/file&bridgeEndpoint=true
#              - simple: ${header.CamelFileParent} == "deploy"
#                steps:
#                  - to: http://172.30.1.84:7777/if/file&bridgeEndpoint=true
#        - log: "전송 후 바디: ${body}"
#        - log: "전송 후 헤더: ${headers}"
